{"version":3,"sources":["hooks/form.js","hooks/context.js","components/feature/VanillaFeatures.js","utils/fetch.js","context/DataContext.jsx","serviceWorker.js","ui/Toggle.jsx","ui/DarkModeToggle.jsx","ui/Menu.jsx","utils/zip.js","components/DatapackForm.jsx","components/processor/PositionPredicate.jsx","components/processor/ProcessorList.jsx","components/surface/SurfaceBuilder.jsx","components/Datapack.jsx","App.js","index.js","components/dimension/DimensionDefaults.js","utils/data.js","hooks/ui.js","components/state/BlockState.jsx","ui/JsonViewer.jsx","components/NamespacedKey.jsx","components/processor/ProcessorDefaults.js","utils/math.js","ui/Modal.jsx","components/noise/NoiseDefaults.js","components/surface/SurfaceBuilderDefaults.js","components/state/Tags.js","components/state/BlockPredicate.jsx","ui/Input.jsx","components/carver/CarverDefaults.js","context/Paths.js","utils/color.js","ui/Button.jsx","components/dimension/DimensionType.jsx","components/noise/NoiseSettings.jsx","components/noise/Structures.jsx","hooks/select.js","components/carver/ConfiguredCarver.jsx","ui/Select.jsx"],"names":["crudReducer","state","action","type","ADD","unshift","payload","UPDATE","target","arrayMove","Error","map","element","REMOVE","filter","REPLACE","useCrudState","data","useReducer","useCrudPreset","onChange","initial","add","useCallback","e","preventDefault","n","update","previous","hasOwnProperty","oldIndex","newIndex","remove","entity","replace","entities","useBlocksOptions","options","blocks","useBlocks","useMemo","Array","isArray","block","value","defaultNamespace","name","label","displayName","useValueChange","changeCallback","obj","isNaN","parseFloat","dataset","id","checked","useJsonEffect","props","useEffect","JSON","stringify","CRUD","useData","useState","setData","updateData","object","stored","splice","findIndex","existing","find","key","push","indexOf","useKeyedListOptions","category","includeCustom","empty","context","useContext","DataContext","custom","keyed","displayNamespacedKey","namespace","struct","vanilla","forEach","useSave","history","method","capitalize","concat","VANILLA_FEATURES","jsonFetch","url","a","headers","Accept","fetch","response","json","responseData","ok","React","createContext","biomes","carvers","dimensions","dimension_types","features","noises","processors","sounds","surfaces","getVanillaResource","structures","template_pools","updateBiomes","biome","addBlock","updateCarvers","carver","updateDimensions","dimension","updateDimensionTypes","dimension_type","updateFeatures","feature","updateNoises","noise","updateProcessors","processor","updateStructures","structure","updateSurfacesBuilders","surface_builder","updateTemplatePools","template_pool","resetAll","DataContextProvider","children","setBiomes","setBlocks","setEntities","setSounds","customBiomes","resetBiomes","customBlocks","dispatchBlock","resetCarvers","resetDimensions","resetDimensionTypes","resetFeatures","resetNoises","resetProcessors","resetStructures","resetSurfacesBuilders","resetTemplatePools","vanillaZip","setVanillaZip","then","values","sound","substr","zip","blob","JSZip","loadAsync","Promise","reject","message","absolute","getAbsolutePath","file","async","parse","resolve","Provider","VANILLA_CARVERS","VANILLA_DIMENSION_TYPES","o","includes","VANILLA_NOISES","VANILLA_PROCESSORS","VANILLA_SURFACE_BUILDERS","Boolean","window","location","hostname","match","Toggle","ariaLabel","className","htmlFor","DarkModeToggle","darkMode","useDarkMode","title","onClick","disable","tabIndex","toggle","enable","NavBar","href","rel","DIMENSIONS_PATH","WORLDGEN_PATH","LEGACY_DIMENSIONS_PATH","LEGACY_WORLDGEN_PATH","buildZip","modified","length","Object","entries","elements","pack","pack_format","description","PATHS","path","el","w","index","split","filename","folder","writeFile","generateAsync","content","saveAs","readZip","extractDatapack","catch","legacy","mcmeta","promises","entry","dir","regex","parseFile","all","getFolderType","pathRegex","contentPromise","d","exec","success","dataUpper","console","error","DatapackForm","nav","onCreate","setError","handleFile","stopPropagation","dataTransfer","files","handleDrag","scrollTo","onDragStart","onDragEnter","onDragOver","onDrop","onSubmit","FormData","get","style","fontSize","required","pattern","autoCapitalize","spellCheck","autoComplete","defaultValue","Button","accept","PositionPredicate","memo","predicate","predicate_type","handleTypeChange","option","handleChange","Select","LinearPosPredicate","AxisAlignedLinearPos","min_chance","step","upChange","max_chance","min_dist","max_dist","axis","handleAxisChange","inputId","ProcessorList","onSave","processor_type","PROCESSORS_OPTIONS","some","dispatch","handleAdd","handleRemove","handleVanillaSelect","processor_list","handleSubmit","fromEntries","NamespacedKey","example","expectBreakage","defaultReplace","onSelectLoad","JsonViewer","p","StructureProcessor","cat","color","handleSelectChange","config","handleAddBlockClick","Name","b","handleAddProcessorClick","rules","PROCESSOR_RULE_DEFAULTS","CustomTag","marginTop","marginLeft","fontWeight","width","BlockAgeProcessor","BlockIgnoreProcessor","BlockRotProcessor","BlockGravityProcessor","RuleProcessor","mossiness","addButton","list","integrity","offset","rule","ProcessorRule","handleInputPredicate","input_predicate","handleLocationPredicate","location_predicate","handlePositionPredicate","position_predicate","handleOutputState","output_state","BlockPredicate","BlockState","SurfaceBuilder","SURFACE_BUILDER","setState","handleTopMaterialChange","top_material","handleUnderMaterialChange","under_material","handleUnderwaterMaterialChange","underwater_material","formData","SURFACE_TYPES_OPTIONS","Biome","lazy","Dimension","ConfiguredFeature","Datapack","useHistory","useToggle","open","toggleModal","setPage","page","handleNamespaceChange","s","handleGenerateClick","to","Modal","onClose","fallback","exact","Main","Resource","component","ConfiguredCarverForm","NoiseSettings","DimensionTypeForm","useParams","createElement","Masonry","itemSelector","gutter","StatsTitle","onDelete","invisible","i","confirm","xmlns","viewBox","useNamespaceState","createPersistedState","App","setNamespace","handleCreation","basename","process","addEventListener","document","body","classList","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","DIMENSION","generator","seed","biome_source","settings","CHUNK_GENERATOR_TYPES","NOISES_NAMES","MULTI_NOISE_BIOME_SOURCE","temperature_noise","firstOctave","amplitudes","humidity_noise","altitude_noise","weirdness_noise","DIMENSION_TYPE_EFFECTS","DIMENSION_TYPE_INFINIBURN","OVERWORLD_DIMENSION_TYPE","has_raids","logical_height","infiniburn","effects","ambient_light","piglin_safe","bed_works","respawn_anchor_works","ultrawarm","natural","coordinate_scale","min_y","height","has_skylight","has_ceiling","OVERWORLD_CAVES_DIMENSION_TYPE","THE_NETHER_DIMENSION_TYPE","fixed_time","THE_END_DIMENSION_TYPE","objectsEqual","keys","every","str","toUpperCase","startsWith","namespacedKey","getStateValue","properties","actual","isValidModKey","separatorIndex","hasDuplicatedObjects","objects","findDecorators","decorators","f","buildDecorated","decorated","current","decorator","refitKeys","build","destKey","group","sky_color","source","shrunk","status","Properties","states","handleValidNewOption","string","handleOptionCreation","handlePropertiesChange","flexGrow","isValidNewOption","onCreateOption","BlockStateProperties","BlocksList","filteredOptions","BlocksNamesList","handlePropertyChange","toLowerCase","handleCheckboxChange","toString","handleNumberChange","selects","possible","min","max","num_values","inline","mayReplaceVanilla","onSelect","hidden","useRef","setKey","fill","toggleFill","mayFill","setMayFill","handleKeyChange","handleReplaceTargetChange","selected","handleKeyDown","form","checkValidity","dispatchEvent","Event","bubbles","cancelable","handleToggle","handleFillToggle","inputValue","hiddenInputValue","Math","apply","isFinite","placeholder","onKeyPress","log","ref","opacity","position","age","probability","INT_MIN_VALUE","INT_MAX_VALUE","maintainPrecision","toFixed","perlinFade","t","lerp","delta","start","end","lerp2","deltaX","deltaY","n00","n10","n01","n11","lerp3","deltaZ","n000","n100","n010","n110","n001","n101","n011","n111","grad","hash","x","y","z","h","u","v","modal","useModal","appendChild","removeChild","createPortal","STRUCTURES","tag","OVERWORLD_NOISE","bedrock_roof_position","bedrock_floor_position","sea_level","disable_mob_generation","stronghold","distance","spread","count","spacing","separation","salt","sampling","xz_scale","y_scale","xz_factor","y_factor","top_slide","size","bottom_slide","size_horizontal","size_vertical","density_factor","density_offset","simplex_surface_noise","default_block","default_fluid","level","snowy","TAGS_OPTIONS","handleBlockChange","handleBlockStateChange","block_state","handleTagChange","BlockSelect","RandomBlockMatch","ConfInput","attr","defaultChecked","uId","random","NumberInput","val","setValue","prevVal","setPrevValue","click","setClick","endsWith","stepUpDown","addition","handleMouseDown","contains","setInterval","handleClick","handleMouseUp","clearInterval","parseInt","numeric","decimals","countDecimals","getNumberSize","onMouseDown","onMouseOut","onMouseUp","ColorInput","hexColorToInteger","integerColorToHex","identifier","padStart","loading","buttonProps","DimensionType","resource","handleNewClick","handleTypeCreated","setConfig","handleFixedTimeToggle","InfiniburnIdentifier","marginBottom","textAlign","NoiseGenerator","handleStructuresChange","handleNoiseChange","handleDisableMobGenerationChange","NoiseConfig","handleSamplingChange","handleTopSlideChange","handleBottomSlideChange","random_density_offset","island_noise_override","amplified","NoiseSamplingConfig","SlideConfig","Structures","handleStrongholdChange","Stronghold","StructuresList","enabled","setStronghold","visibility","setPrevious","original","def","Structure","handleSpacingChange","handleSaltChange","handleDelete","useInlineResources","resources","mutable","getInline","res","ConfiguredCarver","air","handleAirChange","handleLiquidChange","liquid","handleCarverCreated","optionsAir","selectedAir","optionsLiquid","selectedLiquid","isMulti","setCarver","handleProbabilityChange","c","styles","control","backgroundColor","borderColor","boxShadow","transition","singleValue","menuList","input","menu","isFocused","isSelected","cursor","multiValue","multiValueLabel","multiValueRemove","CreatableSelect"],"mappings":"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UC,qBAAWC,KAC3B,OAAO1C,mBAAQ,WACX,OAAOwC,EAAQQ,QAAQlD,OAAOwD,OAAOd,EAAQG,OAAO7C,UACrD,CAAC0C,EAAQG,OAAO7C,OAAQ0C,EAAQQ,QAAQlD,W,wKC3GlCyD,EAAmB,CAC5B,YACA,cACA,sBACA,eACA,aACA,uBACA,QACA,uBACA,uBACA,eACA,mBACA,kBACA,YACA,4BACA,2BACA,iBACA,iBACA,gBACA,gBACA,gBACA,qBACA,kBACA,iBACA,gBACA,iBACA,gBACA,qBACA,aACA,YACA,YACA,cACA,kBACA,iBACA,eACA,YACA,YACA,WACA,eACA,SACA,QACA,aACA,YACA,YACA,cACA,YACA,mBACA,cACA,sBACA,eACA,cACA,SACA,qBACA,cACA,eACA,gBACA,uBACA,cACA,eACA,WACA,aACA,YACA,WACA,eACA,aACA,kBACA,uBACA,qBACA,sBACA,kBACA,gBACA,oBACA,mBACA,oBACA,qBACA,uBACA,sBACA,qBACA,sBACA,oBACA,qBACA,oBACA,kBACA,2BACA,cACA,qBACA,wBACA,mBACA,qBACA,mBACA,mBACA,eACA,sBACA,yBACA,yBACA,0BACA,4BACA,mBACA,wBACA,sBACA,wBACA,sBACA,uBACA,qBACA,uBACA,qBACA,uBACA,qBACA,YACA,gBACA,kBACA,oBACA,kBACA,oBACA,oBACA,iBACA,WACA,aACA,cACA,cACA,eACA,WACA,WACA,iBACA,WACA,eACA,cACA,YACA,eACA,cACA,mBACA,mBACA,gBACA,wBACA,eACA,uBACA,sBACA,oBACA,MACA,WACA,QACA,SACA,SACA,OACA,cACA,YACA,sBACA,mBACA,cACA,YACA,wBACA,aACA,cACA,gBACA,eACA,eACA,kBACA,iBACA,iBACA,sBACA,qBACA,qBACA,eACA,eACA,cACA,iBACA,gBACA,eACA,eACA,yBACA,kCACA,2BACA,+BACA,6BACA,wBACA,sBACA,mBACA,0BACA,gBACA,aACA,cACA,sBACA,iBACA,cACA,cACA,mBACA,oBACA,qBACA,cACA,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","file":"static/js/main.ddeb4ca9.chunk.js","sourcesContent":["import { useCallback, useEffect, useMemo, useReducer, useState } from \"react\";\n\nimport {defaultNamespace} from \"../utils/data\";\nimport {useBlocks, useKeyedListOptions} from \"./context\";\nimport arrayMove from \"array-move\";\n\nfunction crudReducer(state, action) {\n    switch (action.type) {\n        case ADD:\n            if (action.unshift) {\n                return [action.payload, ...state];\n            }\n            return [...state, action.payload];\n        case UPDATE:\n            if (typeof action.target === 'number' && typeof action.payload === 'number') {\n                return arrayMove(state, action.target, action.payload);\n            }\n            if (typeof action.target === 'undefined') {\n                throw new Error('Cannot update an element without its previous state.');\n            }\n            return state.map(element => element === action.target ? action.payload : element);\n        case REMOVE:\n            return state.filter(element => element !== action.payload);\n        case REPLACE:\n            return action.payload;\n        default:\n            return state;\n    }\n}\n\nexport function useCrudState(data = []) {\n    return useReducer(crudReducer, data);\n}\n\n/**\n * @param {object[]} [data] \n * @param {object|function (object[]): object} [initial] \n * @returns {[object[], function (SyntheticEvent): void, function (number|object, number|object): void, function (SyntheticEvent, number): void, function (object[]): void}\n */\nexport function useCrudPreset(onChange, data = [], initial = {}, unshift = false) {\n    const add = useCallback(function(e) {\n        e.preventDefault();\n        const n = typeof initial === 'function' ? initial(data) : { ...initial };\n        if (unshift) {\n            onChange([n, ...data]);\n        }\n        onChange([...data, n]);\n    }, [data, initial, onChange, unshift]);\n    const update = useCallback(function(state, previous) {\n        if (state.hasOwnProperty('oldIndex') && state.hasOwnProperty('newIndex')) {\n            onChange(arrayMove(data, state.oldIndex, state.newIndex));\n        } else {\n            if (typeof previous === 'undefined') {\n                throw new Error('Cannot update an element without its previous state.');\n            }\n            onChange(data.map(element => element === previous ? state : element));\n        }\n    }, [data, onChange]);\n    const remove = useCallback(function(e, entity) {\n        e.preventDefault();\n        if (typeof entity === 'number') {\n            entity = data[entity];\n        }\n        onChange(data.filter(element => element !== entity));\n    }, [data, onChange]);\n    const replace = useCallback(function(entities) {\n        onChange(entities);\n    }, [onChange]);\n\n    return [data, add, update, remove, replace];\n}\n\n/**\n * @param {{label: string, value: string}[]} [options]\n * @return {{label: string, value: string}[]}\n */\nexport function useBlocksOptions(options) {\n    const blocks = useBlocks();\n    return useMemo(function () {\n        return Array.isArray(options) ? options : blocks.map(block => ({ value: defaultNamespace(block.name), label: block.displayName }));\n    }, [blocks, options]);\n}\n\n/**\n * @param {number} [initial] \n * @returns {function(SyntheticEvent|string|number): void} \n */\nexport function useNumber(initial = 0) {\n    const [n, setState] = useState(initial);\n    const setNumber = function(n) {\n        if (typeof n === 'object') {\n            n = n.target.value;\n        }\n        if (typeof n === 'string') {\n            n = isNaN(n) ? initial : parseInt(n);\n        }\n        setState(n);\n    }\n    return [n, setNumber];\n}\n\nexport function useValueChange(changeCallback, obj) {\n    return useCallback(function(e) {\n        if (e.target.type === 'checkbox') {\n            changeCallback({ ...obj, [e.target.dataset.name || e.target.id || e.target.name]: e.target.checked });\n            return;\n        }\n        const value = isNaN(e.target.value) ? e.target.value : parseFloat(e.target.value);\n        changeCallback({ ...obj, [e.target.dataset.name || e.target.id || e.target.name]: value });\n    }, [changeCallback, obj]);\n}\n\nexport function useJsonEffect(state, props, onChange) {\n    useEffect(() => {\n        if (state === props) {\n            return;\n        }\n        if (JSON.stringify(state) !== JSON.stringify(props)) {\n            onChange(state, props);\n        }\n    }, [state, props, onChange]);\n    return state;\n}\n\n/**\n * Fast way to provide a list of options for react-select\n * and store selection as string (list).\n * \n * @param {('biomes'|'dimensions'|'dimension_types'|'features'|'noises'|'surfaces')} category Data category\n * @param {string|string[]} initial Initial selection\n * @param {boolean} [multiple]\n * @returns {[{ value: string, label: string }[], string|string[], function({ value: string }): void]} Options list, currently selected list and his updater\n */\nexport function useKeyedOptionsState(category, initial, multiple) {\n    const options = useKeyedListOptions(category); // Get options\n\n    // Default value for 'multiple' argument\n    if (typeof multiple === 'undefined') {\n        multiple = Array.isArray(initial);\n    }\n\n    // Enhanced use state - usage of options for default value if needed\n    const [selection, setSelection] = useState(initial || function() {\n        if (multiple) {\n            return options.length > 0 ? [options[0].value] : [];\n        }\n        return options.length > 0 ? options[0].value : '';\n    }());\n\n    // End chain react-select change handler\n    const setSelectionFromOptions = useCallback(function(selected) {\n        if (multiple) {\n            setSelection(selected === null ? [] : selected.map(o => o.value));\n        } else {\n            setSelection(selected.value);\n        }\n    }, [multiple]);\n\n    return [options, selection, setSelectionFromOptions];\n}\n\nconst ADD = 'ADD';\nconst UPDATE = 'UPDATE';\nconst REMOVE = 'REMOVE';\nconst REPLACE = 'REPLACE';\nexport const CRUD = { ADD, UPDATE, REMOVE, REPLACE };","import {capitalize, defaultNamespace, displayNamespacedKey} from \"../utils/data\";\nimport {useCallback, useContext, useMemo, useState} from \"react\";\n\nimport { DataContext } from \"../context/DataContext\";\n\n/**\n * @param {object[]} initial\n * @returns {[object[], function(object): void, function(object[]): void]} \n */\nexport function useData(initial = []) {\n    const [data, setData] = useState(initial);\n\n    const updateData = function(object, previous) {\n        setData(stored => {\n            if (!object.hasOwnProperty('key')) {\n                stored.splice(stored.findIndex(obj => obj === (previous || object)), 1);\n                return stored;\n            }\n\n            const existing = stored.find(({ key }) => object.key === key);\n            if (typeof existing !== 'undefined' && existing !== previous) {\n                do {\n                    object.key += '2';\n                } while (stored.findIndex(({ key }) => object.key === key) > -1)\n                stored.push(object);\n                return stored;\n            }\n\n            if (typeof previous === 'undefined' || !previous.hasOwnProperty('key')) {\n                stored.push(object);\n            } else {\n                stored[stored.indexOf(previous)] = object;\n            }\n            return stored;\n        });\n    }\n    return [data, updateData, setData];\n}\n\n/**\n * @param {('dimensions'|'dimension_types'|'biomes'|'carvers'|'features'|'surfaces'|'noises')} category Data category\n * @param {boolean} [includeCustom]\n * @param {boolean} [empty]\n * @returns {{ value: string, label: string }[]} Options list for react-select\n */\nexport function useKeyedListOptions(category, includeCustom = true, empty = false) {\n    const context = useContext(DataContext);\n    if (empty) {\n        return [];\n    }\n\n    const options = includeCustom ? context.custom[category]\n        .map(keyed => {\n            const name = displayNamespacedKey(keyed.key, context.namespace);\n            return { value: keyed.key, label: '(Custom) ' + name };\n        }) : [];\n\n    let struct = null;\n    context.vanilla[category].forEach(keyed => {\n        if (struct === null) {\n            struct = keyed.hasOwnProperty('displayName') ? 1 : (keyed.hasOwnProperty('label') ? 2 : 3);\n        }\n        switch(struct) {\n            case 1: // displayName\n                options.push({ value: defaultNamespace(keyed.name), label: keyed.displayName });\n                return;\n            case 2: // already option\n                options.push(keyed);\n                return;\n            default:\n                options.push({ value: defaultNamespace(keyed), label: keyed });\n        }\n    });\n    return options;\n}\n\n/**\n * @param {string} type \n * @param {History} history \n * @param {number} [id] \n * @returns {function(object): void}\n */\nexport function useSave(type, history, id) {\n    const custom = useContext(DataContext).custom;\n    return useCallback(function (data) {\n        const method = 'update' + function () {\n            switch (type) {\n                case 'surface':\n                    return 'SurfacesBuilders';\n                case 'dimension_type':\n                    return 'DimensionTypes';\n                default:\n                    return capitalize(type) + 's';\n            }\n        }();\n        custom[method](data, custom[type + 's'][id]);\n        history.push('/');\n    }, [custom, history, id, type]);\n}\n\n/**\n * @return {{ name: string, displayName: string, material: string, states: { name: string, type: 'bool'|'int'|'enum', num_values: number }[] }[]}\n */\nexport function useBlocks() {\n    const context = useContext(DataContext);\n    return useMemo(function () {\n        return context.vanilla.blocks.concat(context.custom.blocks);\n    }, [context.custom.blocks, context.vanilla.blocks]);\n}\n","export const VANILLA_FEATURES = [\n    \"end_spike\",\n    \"end_gateway\",\n    \"end_gateway_delayed\",\n    \"chorus_plant\",\n    \"end_island\",\n    \"end_island_decorated\",\n    \"delta\",\n    \"small_basalt_columns\",\n    \"large_basalt_columns\",\n    \"basalt_blobs\",\n    \"blackstone_blobs\",\n    \"glowstone_extra\",\n    \"glowstone\",\n    \"crimson_forest_vegetation\",\n    \"warped_forest_vegetation\",\n    \"nether_sprouts\",\n    \"twisting_vines\",\n    \"weeping_vines\",\n    \"basalt_pillar\",\n    \"seagrass_cold\",\n    \"seagrass_deep_cold\",\n    \"seagrass_normal\",\n    \"seagrass_river\",\n    \"seagrass_deep\",\n    \"seagrass_swamp\",\n    \"seagrass_warm\",\n    \"seagrass_deep_warm\",\n    \"sea_pickle\",\n    \"ice_spike\",\n    \"ice_patch\",\n    \"forest_rock\",\n    \"seagrass_simple\",\n    \"iceberg_packed\",\n    \"iceberg_blue\",\n    \"kelp_cold\",\n    \"kelp_warm\",\n    \"blue_ice\",\n    \"bamboo_light\",\n    \"bamboo\",\n    \"vines\",\n    \"lake_water\",\n    \"lake_lava\",\n    \"disk_clay\",\n    \"disk_gravel\",\n    \"disk_sand\",\n    \"freeze_top_layer\",\n    \"bonus_chest\",\n    \"void_start_platform\",\n    \"monster_room\",\n    \"desert_well\",\n    \"fossil\",\n    \"spring_lava_double\",\n    \"spring_lava\",\n    \"spring_delta\",\n    \"spring_closed\",\n    \"spring_closed_double\",\n    \"spring_open\",\n    \"spring_water\",\n    \"pile_hay\",\n    \"pile_melon\",\n    \"pile_snow\",\n    \"pile_ice\",\n    \"pile_pumpkin\",\n    \"patch_fire\",\n    \"patch_soul_fire\",\n    \"patch_brown_mushroom\",\n    \"patch_red_mushroom\",\n    \"patch_crimson_roots\",\n    \"patch_sunflower\",\n    \"patch_pumpkin\",\n    \"patch_taiga_grass\",\n    \"patch_berry_bush\",\n    \"patch_grass_plain\",\n    \"patch_grass_forest\",\n    \"patch_grass_badlands\",\n    \"patch_grass_savanna\",\n    \"patch_grass_normal\",\n    \"patch_grass_taiga_2\",\n    \"patch_grass_taiga\",\n    \"patch_grass_jungle\",\n    \"patch_dead_bush_2\",\n    \"patch_dead_bush\",\n    \"patch_dead_bush_badlands\",\n    \"patch_melon\",\n    \"patch_berry_sparse\",\n    \"patch_berry_decorated\",\n    \"patch_waterlilly\",\n    \"patch_tall_grass_2\",\n    \"patch_tall_grass\",\n    \"patch_large_fern\",\n    \"patch_cactus\",\n    \"patch_cactus_desert\",\n    \"patch_cactus_decorated\",\n    \"patch_sugar_cane_swamp\",\n    \"patch_sugar_cane_desert\",\n    \"patch_sugar_cane_badlands\",\n    \"patch_sugar_cane\",\n    \"brown_mushroom_nether\",\n    \"red_mushroom_nether\",\n    \"brown_mushroom_normal\",\n    \"red_mushroom_normal\",\n    \"brown_mushroom_taiga\",\n    \"red_mushroom_taiga\",\n    \"brown_mushroom_giant\",\n    \"red_mushroom_giant\",\n    \"brown_mushroom_swamp\",\n    \"red_mushroom_swamp\",\n    \"ore_magma\",\n    \"ore_soul_sand\",\n    \"ore_gold_deltas\",\n    \"ore_quartz_deltas\",\n    \"ore_gold_nether\",\n    \"ore_quartz_nether\",\n    \"ore_gravel_nether\",\n    \"ore_blackstone\",\n    \"ore_dirt\",\n    \"ore_gravel\",\n    \"ore_granite\",\n    \"ore_diorite\",\n    \"ore_andesite\",\n    \"ore_coal\",\n    \"ore_iron\",\n    \"ore_gold_extra\",\n    \"ore_gold\",\n    \"ore_redstone\",\n    \"ore_diamond\",\n    \"ore_lapis\",\n    \"ore_infested\",\n    \"ore_emerald\",\n    \"ore_debris_large\",\n    \"ore_debris_small\",\n    \"crimson_fungi\",\n    \"crimson_fungi_planted\",\n    \"warped_fungi\",\n    \"warped_fungi_planted\",\n    \"huge_brown_mushroom\",\n    \"huge_red_mushroom\",\n    \"oak\",\n    \"dark_oak\",\n    \"birch\",\n    \"acacia\",\n    \"spruce\",\n    \"pine\",\n    \"jungle_tree\",\n    \"fancy_oak\",\n    \"jungle_tree_no_vine\",\n    \"mega_jungle_tree\",\n    \"mega_spruce\",\n    \"mega_pine\",\n    \"super_birch_bees_0002\",\n    \"swamp_tree\",\n    \"jungle_bush\",\n    \"oak_bees_0002\",\n    \"oak_bees_002\",\n    \"oak_bees_005\",\n    \"birch_bees_0002\",\n    \"birch_bees_002\",\n    \"birch_bees_005\",\n    \"fancy_oak_bees_0002\",\n    \"fancy_oak_bees_002\",\n    \"fancy_oak_bees_005\",\n    \"oak_badlands\",\n    \"spruce_snowy\",\n    \"flower_warm\",\n    \"flower_default\",\n    \"flower_forest\",\n    \"flower_swamp\",\n    \"flower_plain\",\n    \"flower_plain_decorated\",\n    \"forest_flower_vegetation_common\",\n    \"forest_flower_vegetation\",\n    \"dark_forest_vegetation_brown\",\n    \"dark_forest_vegetation_red\",\n    \"warm_ocean_vegetation\",\n    \"forest_flower_trees\",\n    \"taiga_vegetation\",\n    \"trees_shattered_savanna\",\n    \"trees_savanna\",\n    \"birch_tall\",\n    \"trees_birch\",\n    \"trees_mountain_edge\",\n    \"trees_mountain\",\n    \"trees_water\",\n    \"birch_other\",\n    \"plain_vegetation\",\n    \"trees_jungle_edge\",\n    \"trees_giant_spruce\",\n    \"trees_giant\",\n    \"trees_jungle\",\n    \"bamboo_vegetation\",\n    \"mushroom_field_vegetation\"\n];\n","/**\n * @param {string} url\n * @param {object} options\n * @param {object} [headers]\n * @returns {Promise<object>}\n */\nexport async function jsonFetch(url, options, headers = {\n    Accept: 'application/json',\n    'Content-Type': 'application/json'\n}) {\n    const response = await fetch(url, {\n        headers,\n        ...options\n    });\n\n    const responseData = await response.json();\n    if (response.ok) {\n        return responseData;\n    }\n    throw responseData;\n}\n","import React, { useCallback, useEffect, useState } from 'react';\n\nimport { VANILLA_CARVERS } from '../components/carver/CarverDefaults';\nimport { VANILLA_DIMENSION_TYPES } from '../components/dimension/DimensionDefaults';\nimport { VANILLA_FEATURES } from '../components/feature/VanillaFeatures';\nimport { VANILLA_NOISES } from '../components/noise/NoiseDefaults';\nimport { VANILLA_PROCESSORS } from '../components/processor/ProcessorDefaults';\nimport { VANILLA_SURFACE_BUILDERS } from '../components/surface/SurfaceBuilderDefaults';\nimport { getAbsolutePath } from './Paths';\nimport { jsonFetch } from '../utils/fetch';\nimport {useCrudState} from \"../hooks/form\";\nimport { useData } from '../hooks/context';\nimport JSZip from 'jszip';\n\nexport const DataContext = React.createContext({\n    vanilla: {\n        biomes: [],\n        blocks: [],\n        carvers: [],\n        dimensions: [],\n        dimension_types: [],\n        entities: [],\n        features: [],\n        noises: [],\n        processors: [],\n        sounds: [],\n        surfaces: [],\n        /**\n         * @param {string} type \n         * @param {string} key \n         * @returns {Promise<object>}  \n         */\n        getVanillaResource: (type, key) => {}\n    },\n    custom: {\n        biomes: [],\n        blocks: [],\n        carvers: [],\n        dimensions: [],\n        dimension_types: [],\n        features: [],\n        noises: [],\n        processors: [],\n        structures: [],\n        surfaces: [],\n        template_pools: [],\n        updateBiomes: (biome) => {},\n        addBlock: (block) => {},\n        updateCarvers: (carver) => {},\n        updateDimensions: (dimension) => {},\n        updateDimensionTypes: (dimension_type) => {},\n        updateFeatures: (feature) => {},\n        updateNoises: (noise) => {},\n        updateProcessors: (processor) => {},\n        updateStructures: (structure) => {},\n        updateSurfacesBuilders: (surface_builder) => {},\n        updateTemplatePools: (template_pool) => {},\n        resetAll: (initial = {}) => {}\n    },\n    namespace: ''\n});\n\nexport function DataContextProvider({children, namespace, initial = {}}) {\n    const [biomes, setBiomes] = useState([]);\n    const [blocks, setBlocks] = useState([]);\n    const [entities, setEntities] = useState([]);\n    const [sounds, setSounds] = useState([]);\n\n    const [customBiomes, updateBiomes, resetBiomes] = useData(initial.biomes);\n    const [customBlocks, dispatchBlock] = useCrudState();\n    const [carvers, updateCarvers, resetCarvers] = useData(initial.carvers);\n    const [dimensions, updateDimensions, resetDimensions] = useData(initial.dimensions);\n    const [dimension_types, updateDimensionTypes, resetDimensionTypes] = useData(initial.dimension_types);\n    const [features, updateFeatures, resetFeatures] = useData(initial.features);\n    const [noises, updateNoises, resetNoises] = useData(initial.noises);\n    const [processors, updateProcessors, resetProcessors] = useData(initial.processors);\n    const [structures, updateStructures, resetStructures] = useData(initial.structures);\n    const [surfaces, updateSurfacesBuilders, resetSurfacesBuilders] = useData(initial.surfaces);\n    const [template_pools, updateTemplatePools, resetTemplatePools] = useData(initial.template_pools);\n\n    const [vanillaZip, setVanillaZip] = useState(null);\n\n    useEffect(() => {\n        (async function () {\n            jsonFetch('https://unpkg.com/minecraft-data@2.84.0/minecraft-data/data/pc/1.16.2/biomes.json')\n                .then(biomes => setBiomes(biomes));\n            jsonFetch('https://unpkg.com/minecraft-data@2.84.0/minecraft-data/data/pc/1.16.2/blocks.json')\n                .then(blocks => setBlocks(blocks));\n            jsonFetch('https://unpkg.com/minecraft-data@2.84.0/minecraft-data/data/pc/1.16.2/entities.json')\n                .then(entities => setEntities(entities.map(entity => ({ value: 'minecraft:' + entity.name, label: entity.displayName }))));\n            jsonFetch('https://raw.githubusercontent.com/Arcensoth/mcdata/master/processed/reports/registries/sound_event/data.min.json', {}, {})\n                .then(sounds => setSounds(sounds.values.map(sound => ({ value: sound, label: sound.substr(10) }))));\n        })();\n    }, []);\n\n    const getVanillaResource = useCallback(async function (type, key) {\n        let zip = vanillaZip;\n        if (zip === null) {\n            const blob = (await fetch('https://raw.githubusercontent.com/slicedlime/examples/80fb4b8418ff3ff5724f4a0438bb422f58960bd9/vanilla_worldgen.zip')).blob();\n            try {\n                zip = await JSZip.loadAsync(blob);\n            } catch (e) {\n                setVanillaZip(e);\n                return Promise.reject(new Error(`Unable to download the vanilla resource archive for reference.\\n${e.message}`));\n            }\n            setVanillaZip(zip);\n        } else if (zip instanceof Error) {\n            return Promise.reject(zip);\n        }\n        const absolute = getAbsolutePath(type, 'minecraft', key).substr(15).replace('minecraft:', '');\n        const file = zip.file(absolute);\n        if (file === null) {\n            return Promise.reject(new Error(`Unable to find the associated vanilla file (tested ${absolute}).`));\n        }\n        return Promise.resolve(JSON.parse(await file.async('text')));\n    }, [vanillaZip]);\n\n    const addBlock = useCallback(function (block) {\n        dispatchBlock({ type: 'ADD', payload: { displayName: \"(Custom) \" + block, name: block } });\n    }, [dispatchBlock]);\n\n    return <DataContext.Provider value={{\n        vanilla: {\n            biomes,\n            blocks,\n            carvers: VANILLA_CARVERS,\n            dimensions: VANILLA_DIMENSION_TYPES.filter(o => !o.value.includes('cave')),\n            dimension_types: VANILLA_DIMENSION_TYPES,\n            entities,\n            features: VANILLA_FEATURES,\n            noises: VANILLA_NOISES,\n            processors: VANILLA_PROCESSORS,\n            sounds,\n            surfaces: VANILLA_SURFACE_BUILDERS,\n            getVanillaResource\n        },\n        custom: {\n            biomes: customBiomes, blocks: customBlocks, carvers, dimensions, dimension_types, features, noises, processors, structures, surfaces, template_pools,\n            updateBiomes, addBlock, updateCarvers, updateDimensions, updateDimensionTypes, updateFeatures, updateNoises, updateProcessors, updateStructures, updateSurfacesBuilders, updateTemplatePools,\n            resetAll: function (initial = {}) {\n                resetBiomes(initial.biomes);\n                resetCarvers(initial.carvers);\n                resetDimensions(initial.dimensions);\n                resetDimensionTypes(initial.dimension_types);\n                resetFeatures(initial.features);\n                resetNoises(initial.noises);\n                resetProcessors(initial.processors);\n                resetStructures(initial.structures);\n                resetSurfacesBuilders(initial.surfaces);\n                resetTemplatePools(initial.template_pools);\n            }\n        },\n        namespace\n    }}>{children}</DataContext.Provider>\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\n\nexport const Toggle = ({ ariaLabel, checked, id, onChange }) => (\n    <span className=\"toggle-control\">\n        <input\n            aria-label={ariaLabel}\n            className=\"dmcheck\"\n            type=\"checkbox\"\n            checked={checked}\n            onChange={onChange}\n            id={id}\n        />\n        <label htmlFor={id} />\n    </span>\n);\n","import { Toggle } from './Toggle';\nimport React from 'react';\nimport useDarkMode from 'use-dark-mode';\n\nexport function DarkModeToggle() {\n    const darkMode = useDarkMode(true);\n\n    return <div className=\"dark-mode-toggle\" title=\"Dark mode toggle\">\n        <button type=\"button\" onClick={darkMode.disable} tabIndex=\"-1\"></button>\n        <Toggle ariaLabel=\"Dark mode toggle\" checked={darkMode.value} onChange={darkMode.toggle} />\n        <button type=\"button\" onClick={darkMode.enable} tabIndex=\"-1\"></button>\n    </div>\n}","import { DarkModeToggle } from './DarkModeToggle';\nimport React from 'react';\n\nexport function NavBar({ children }) {\n    return <div className=\"navbar\">\n        {children}\n        <p className=\"github\"><a href=\"https://github.com/syldium/worldgen\" target=\"_blank\" rel=\"noopener noreferrer\">View on GitHub</a></p>\n        <DarkModeToggle />\n    </div>\n}\n","import { PATHS } from \"../context/Paths\";\nimport { dataUpper } from \"./data\";\nimport { saveAs } from \"file-saver\";\nimport JSZip from \"jszip\";\n\nconst DIMENSIONS_PATH = /^data\\/([a-z0-9_.-]+)\\/(dimension|dimension_type)\\/([a-z0-9/._-]+).json$/;\nconst WORLDGEN_PATH = /^data\\/([a-z0-9_.-]+)\\/worldgen\\/(biome|configured_carver|configured_feature|configured_surface_builder|noise_settings|processor_list)\\/([a-z0-9/._-]+).json$/;\n\nconst LEGACY_DIMENSIONS_PATH = /^data\\/minecraft\\/(dimension|dimension_type)\\/([a-z0-9_.-]+)\\/([a-z0-9/._-]+).json$/;\nconst LEGACY_WORLDGEN_PATH = /^data\\/minecraft\\/worldgen\\/(biome|configured_carver|configured_feature|configured_surface_builder|noise_settings|processor_list)\\/([a-z0-9_.-]+)\\/([a-z0-9/._-]+).json$/;\n\n/**\n * Build zip in blob.\n * \n * @param {object} custom \n */\nexport function buildZip(custom) {\n    const zip = new JSZip();\n\n    let modified;\n    if (custom.dimensions.length > 0) {\n        modified = 'dimension';\n    } else if (custom.biomes.length > 0) {\n        modified = 'biome';\n    } else {\n        modified = (Object.entries(custom).find(([type, elements]) => typeof elements !== 'function' && elements.length > 0) || [''])[0];\n    }\n    \n    zip.file('pack.mcmeta', JSON.stringify({\n        pack: {\n            pack_format: 6,\n            description: 'Custom ' + modified\n        }\n    }, null, 4));\n    Object.entries(PATHS).forEach(([type, path]) => writeFile(zip, path, custom[type]));\n    zip.generateAsync({ type: 'blob' })\n        .then(function(content) {\n            saveAs(content, 'generated_datapack.zip');\n        });\n}\n\n/**\n * @param {File} file\n * @returns {Promise<[string, { biomes: object[], dimensions: object[], features: object[], surfaces: object[] }]>}\n */\nexport function readZip(file) {\n    return new Promise((resolve, reject) => {\n        if (!['application/zip', 'application/octet-stream', 'application/x-zip-compressed', 'multipart/x-zip'].includes(file.type)) {\n             reject(new Error(`File is not a .zip. Got: ${file.type}`));\n        }\n\n        JSZip.loadAsync(file).then((zip) => {\n            extractDatapack(zip)\n                .then(resolve)\n                .catch(reject);\n        }).catch(reject);\n    });\n}\n\n/**\n * @param {JSZip} zip \n * @returns {Promise<string, object>}\n */\nasync function extractDatapack(zip) {\n    let namespace = 'minecraft';\n    const data = {\n        biomes: [],\n        carvers: [],\n        dimensions: [],\n        dimension_types: [],\n        features: [],\n        noises: [],\n        processors: [],\n        surfaces: []\n    };\n\n    const pack = zip.file('pack.mcmeta');\n    if (pack === null) {\n        throw new Error('Invalid datapack: no pack.mcmeta');\n    }\n    let legacy = false;\n    try {\n        const mcmeta = JSON.parse(await pack.async('text'));\n        legacy = mcmeta.pack.pack_format < 6;\n    } catch (e) {\n        throw new Error(`Error reading pack.mcmeta file: ${e.message}`);\n    }\n    \n\n    return new Promise((resolve, reject) => {\n        const promises = [];\n        zip.forEach(function(path, entry) {\n            if (entry.dir) {\n                return;\n            }\n            const paths = legacy ? [LEGACY_DIMENSIONS_PATH, LEGACY_WORLDGEN_PATH] : [DIMENSIONS_PATH, WORLDGEN_PATH];\n            const regex = paths.find(path => entry.name.match(path)) || WORLDGEN_PATH;\n            promises.push(parseFile(legacy, regex, entry.name, zip.file(entry.name).async('text')));\n        });\n\n        Promise.all(promises).then(function(values) {\n            values.forEach(function(value) {\n                if (value === null) {\n                    return;\n                }\n\n                if (value.namespace !== 'minecraft') {\n                    namespace = value.namespace;\n                }\n                data[value.type].push(value.data);\n            });\n            resolve([namespace, data]);\n        }).catch(e => reject(e));\n    });\n}\n\nfunction getFolderType(folder) {\n    switch (folder) {\n        case 'configured_carver':\n            return 'carvers';\n        case 'configured_feature':\n            return 'features';\n        case 'configured_surface_builder':\n            return 'surfaces';\n        case 'noise_settings':\n            return 'noises';\n        case 'processor_list':\n            return 'processors';\n        default:\n            return folder + 's';\n    }\n}\n\n/**\n * Parse json file when it will be ready.\n * \n * @param {boolean} legacy\n * @param {RegExp} pathRegex \n * @param {string} filename \n * @param {Promise<string>} contentPromise \n * @returns {Promise<{namespace: string, data: object, type: string}>}\n */\nasync function parseFile(legacy, pathRegex, filename, contentPromise) {\n    const d = pathRegex.exec(filename);\n    if (d === null) {\n        return new Promise((success) => success(null)); // Skip file\n    }\n\n    return new Promise((resolve, reject) => {\n        contentPromise.then(content => {\n            const obj = JSON.parse(content);\n            const namespace = d[legacy ? 2 : 1];\n            const type = getFolderType(d[legacy ? 1 : 2]);\n            obj.key = namespace + ':' + d[3];\n            const data = dataUpper(type, obj);\n            resolve({ namespace, data, type });\n        }).catch(e => {\n            if (e.name !== 'SyntaxError') {\n                console.error(e);\n            }\n            reject(new Error(`Cannot read ${filename}:\\n${e.message}`));\n        });\n    });\n}\n\nfunction writeFile(zip, path, elements) {\n    if (elements.length < 1) {\n        return;\n    }\n\n    for (const el of elements) {\n        const w = {...el};\n        delete w.key;\n        delete w.index;\n\n        const [namespace, filename] = el.key.split(':');\n        zip.folder(path.replace('%namespace%', namespace))\n            .file(filename + '.json', JSON.stringify(w, null, 2));\n    }\n}\n","import React, { useContext, useState } from 'react';\n\nimport { Button } from '../ui/Button';\nimport { DataContext } from '../context/DataContext';\nimport { NavBar } from '../ui/Menu';\nimport { readZip } from '../utils/zip';\n\nexport function DatapackForm({ nav = true, onCreate }) {\n\n    const context = useContext(DataContext);\n    const [error, setError] = useState(null);\n\n    const handleCreate = function(e) {\n        e.preventDefault();\n        const data = new FormData(e.target);\n        const namespace = data.get('namespace');\n        onCreate(namespace);\n    };\n\n    const handleFile = function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const file = (e.dataTransfer || e.target).files[0];\n        readZip(file)\n            .then(([namespace, initial]) => {\n                onCreate(namespace);\n                context.custom.resetAll(initial);\n            })\n            .catch(error => {\n                console.error(error);\n                setError(error.message);\n            });\n    };\n    const handleDrag = function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n    };\n\n    window.scrollTo(0, 0);\n\n    return <div className=\"first-screen\" onDragStart={handleDrag} onDragEnter={handleDrag} onDragOver={handleDrag} onDrop={handleFile}>\n        {nav && <NavBar><h2>Dimension datapack generator</h2></NavBar>}\n        {nav || <h2>Clean workplace</h2>}\n        <form onSubmit={handleCreate}>\n            <div className=\"form-control\">\n                {nav && <div className=\"mbm\">\n                    <h3>What's this?</h3>\n                    <p className=\"mbm\" style={{ fontSize: '0.95rem' }}>\n                        This online generator under development allows you to create world generation datapacks for Minecraft 1.16.5. You'll be able to create your own biomes or edit existing ones, custom trees, change the amplitude of the terrain, mix generated blocks and more in the following menus. To continue, choose your datapack identifier.\n                    </p>\n                    <hr />\n                </div>}\n                <label htmlFor=\"namespace\">Default namespace</label><br />\n                <input type=\"text\" name=\"namespace\" id=\"namespace\" required pattern=\"[a-z0-9._-]+\" autoCapitalize=\"none\" spellCheck=\"false\" autoComplete=\"off\" aria-describedby=\"namespaceHelp\" defaultValue={context.namespace} />\n                <p className=\"help2\"><small id=\"namespaceHelp\" className=\"form-text text-muted\">This differentiates the datapack from the vanilla functions. Namespaces and identifiers may only contain letters, numbers and <code>._-</code> characters. This namespace is not final, you can edit the vanilla dimensions in the following menus.</small></p>\n                <div className=\"actions\">\n                    <Button type=\"submit\">Create</Button>\n                    <input type=\"file\" name=\"load-existing-zip\" id=\"load-existing-zip\" accept=\".zip\" onChange={handleFile} tabIndex=\"0\" /><label htmlFor=\"load-existing-zip\" className=\"btn--info\">Use existing datapack</label>\n                </div>\n                <div className=\"mtm\">\n                    {error !== null && <div className=\"alert--danger\">{error}</div>}\n                    <p className=\"alert--warning\">\n                        This generator is currently built for 1.16.5.\n                    </p>\n                </div>\n            </div>\n        </form>\n    </div>\n}\n","import React, { useCallback, useMemo } from \"react\";\n\nimport { NumberInput } from \"../../ui/Input\";\nimport Select from \"../../ui/Select\";\n\nexport const PositionPredicate = React.memo(function ({ className = 'form-group', onChange, predicate = { predicate_type: 'minecraft:always_true' } }) {\n\n    const handleTypeChange = useCallback(function (option) {\n        onChange({ predicate_type: option.value }, predicate);\n    }, [onChange, predicate]);\n    const handleChange = useCallback(function (value) {\n        onChange({ ...predicate, ...value }, predicate);\n    }, [onChange, predicate]);\n\n    const options = useMemo(function () {\n        return [\n            { value: 'minecraft:always_true', label: 'Always true' },\n            { value: 'minecraft:linear_pos', label: 'Linear pos' },\n            { value: 'minecraft:axis_aligned_linear_pos', label: 'Axis aligned linear pos' }\n        ];\n    }, []);\n\n    const type = predicate.predicate_type;\n    return <div className={className}>\n        <label>Predicate type</label>\n        <Select options={options} value={options.find(o => o.value === type)} onChange={handleTypeChange} />\n        {type === 'minecraft:linear_pos' && <LinearPosPredicate predicate={predicate} onChange={handleChange} />}\n        {type === 'minecraft:axis_aligned_linear_pos' && <AxisAlignedLinearPos predicate={predicate} onChange={handleChange} />}\n    </div>\n});\n\n\nconst LinearPosPredicate = React.memo(function ({ children, onChange, predicate }) {\n    return <div className=\"form-group form-row\">\n        <NumberInput id=\"min_chance\" value={predicate.min_chance} step={0.1} upChange={onChange} required={false}>Min chance</NumberInput>\n        <NumberInput id=\"max_chance\" value={predicate.max_chance} step={0.1} upChange={onChange} required={false}>Max chance</NumberInput>\n        <NumberInput id=\"min_dist\" value={predicate.min_dist} upChange={onChange} required={false}>Min dist</NumberInput>\n        <NumberInput id=\"max_dist\" value={predicate.max_dist} upChange={onChange} required={false}>Min dist</NumberInput>\n        {children}\n    </div>\n});\n\nconst AxisAlignedLinearPos = React.memo(function ({ children, onChange, predicate }) {\n    const options = ['x', 'y', 'z'].map(axis => ({ value: axis, label: axis }));\n\n    const handleAxisChange = useCallback(function (option) {\n        onChange({ axis: option.value }, predicate);\n    }, [onChange, predicate]);\n\n    return <LinearPosPredicate predicate={predicate} onChange={onChange}>\n        <div className=\"form-row\">\n            <label htmlFor=\"axis\">Axis :&nbsp;</label>\n            <Select options={options} value={options.find(o => predicate.axis === o.value) || options[1]} onChange={handleAxisChange} inputId=\"axis\" />\n        </div>\n        {children}\n    </LinearPosPredicate>\n});\n","import { BlockState, BlocksList } from \"../state/BlockState\";\nimport { CRUD, useCrudPreset, useCrudState, useJsonEffect } from \"../../hooks/form\";\nimport { PROCESSORS_OPTIONS, PROCESSOR_RULE_DEFAULTS } from './ProcessorDefaults';\nimport React, { useCallback, useContext } from \"react\";\n\nimport { BlockPredicate } from \"../state/BlockPredicate\";\nimport { Button } from \"../../ui/Button\";\nimport { DataContext } from \"../../context/DataContext\";\nimport { JsonViewer } from \"../../ui/JsonViewer\";\nimport { NamespacedKey } from \"../NamespacedKey\";\nimport { NumberInput } from \"../../ui/Input\";\nimport { PositionPredicate } from './PositionPredicate';\nimport Select from \"../../ui/Select\";\n\nexport function ProcessorList({ data = { processors: [] }, onSave }) {\n\n    const [processors, dispatch] = useCrudState(data.processors, function (processors) {\n        if (processors.length < 1) {\n            return { processor_type: 'minecraft:rule' };\n        }\n        // Get the first non taken processor\n        return { processor_type: (PROCESSORS_OPTIONS.filter(o => !processors.some(d => d.processor_type === o.value))[0] || { value: 'minecraft:rule' }).value };\n    });\n\n    const handleAdd = useCallback(function (e) {\n        e.preventDefault();\n        let processor_type = 'minecraft:rule';\n        if (processors.length > 0) {\n            processor_type = (PROCESSORS_OPTIONS.filter(o => !processors.some(d => d.processor_type === o.value))[0] || { value: 'minecraft:rule' }).value;\n        }\n        dispatch({ type: CRUD.ADD, payload: { processor_type } });\n    }, [dispatch, processors]);\n    const handleChange = useCallback(function (processor, previous) {\n        dispatch({ type: CRUD.UPDATE, target: previous, payload: processor });\n    }, [dispatch]);\n    const handleRemove = useCallback(function (e, processor) {\n        e.preventDefault();\n        dispatch({ type: CRUD.REMOVE, payload: processor });\n    }, [dispatch]);\n\n    const handleVanillaSelect = useCallback(function (processor_list) {\n        dispatch({ type: CRUD.REPLACE, payload: processor_list.processors });\n    }, [dispatch]);\n\n    const handleSubmit = useCallback(function (e) {\n        e.preventDefault();\n        onSave({\n            processors,\n            ...Object.fromEntries(new FormData(e.target))\n        }, data);\n    }, [data, onSave, processors]);\n\n    return <form onSubmit={handleSubmit}>\n        <NamespacedKey example=\"concretify\" type=\"processors\" value={data.key} expectBreakage={typeof data.key !== 'undefined'} defaultReplace={true} onSelectLoad={handleVanillaSelect}>\n            processors list\n            <JsonViewer data={{ processors }} />\n            {(processors.length > 0 && PROCESSORS_OPTIONS.length > processors.length) && <Button onClick={handleAdd}>Add processor</Button>}\n        </NamespacedKey>\n        <div className=\"mtm mbm\">\n            {processors.map(processor => {\n                const options = PROCESSORS_OPTIONS.filter(o => processor.processor_type === o.value || !processors.some(p => p.processor_type === o.value));\n                return <StructureProcessor onChange={handleChange} processor={processor} options={options} key={JSON.stringify(processor)}>\n                    <Button cat=\"danger mls\" onClick={e => handleRemove(e, processor)}>Remove</Button>\n                </StructureProcessor>\n            })}\n            {processors.length < 1 && <p className=\"pts mll text-muted\">To begin, <a href=\"#add-processor\" onClick={handleAdd} style={{ color: 'inherit' }}>add a processor</a>...</p>}\n        </div>\n        {processors.length > 0 && <Button type=\"submit\">Save</Button>}\n    </form>\n}\n\nconst StructureProcessor = React.memo(function ({ children, processor = { processor_type: 'minecraft:block_age' }, onChange, options }) {\n\n    const handleSelectChange = useCallback(function (option) {\n        onChange({ processor_type: option.value }, processor);\n    }, [processor, onChange]);\n    const handleChange = useCallback(function (config) {\n        onChange({ ...processor, ...config }, processor);\n    }, [processor, onChange]);\n\n    const blocks = useContext(DataContext).vanilla.blocks;\n    const handleAddBlockClick = useCallback(function (e) {\n        e.preventDefault();\n        onChange({ ...processor, blocks: [...(processor.blocks || []), { Name: 'minecraft:' + (blocks.find(o => !(processor.blocks || []).some(b => b.Name.substr(10) === o.name)) || { name: 'stone' }).name }] }, processor);\n    }, [blocks, onChange, processor]);\n    const handleAddProcessorClick = useCallback(function (e) {\n        e.preventDefault();\n        onChange({ ...processor, rules: [...(processor.rules || []), PROCESSOR_RULE_DEFAULTS] }, processor);\n    }, [onChange, processor]);\n\n    const type = processor.processor_type;\n    const CustomTag = ['minecraft:jigsaw_replacement', 'minecraft:nop', 'minecraft:blackstone_replace', 'minecraft:lava_submerged_block'].includes(type) ? ({ children }) => <li style={{ marginTop: '1.5rem', marginLeft: '1.6rem' }}>{children}</li> : 'fieldset';\n    return <CustomTag>\n        <legend style={{ fontWeight: 'normal', fontSize: '1rem' }}>\n            <div className=\"inbl\" style={{ width: '28ch' }}><Select options={options} value={options.find(o => type === o.value)} onChange={handleSelectChange} /></div>\n            {type === 'minecraft:block_ignore' && <Button cat=\"primary mls\" onClick={handleAddBlockClick}>Add block</Button>}\n            {type === 'minecraft:rule' && <Button cat=\"primary mls\" onClick={handleAddProcessorClick}>Add processor</Button>}\n            {children}\n        </legend>\n        {type === 'minecraft:block_age' && <BlockAgeProcessor onChange={handleChange} processor={processor} />}\n        {type === 'minecraft:block_ignore' && <BlockIgnoreProcessor onChange={handleChange} processor={processor} />}\n        {type === 'minecraft:block_rot' && <BlockRotProcessor onChange={handleChange} processor={processor} />}\n        {type === 'minecraft:gravity' && <BlockGravityProcessor onChange={handleChange} processor={processor} />}\n        {type === 'minecraft:rule' && <RuleProcessor onChange={handleChange} processor={processor} />}\n    </CustomTag>;\n});\n\n// BlackstoneReplacementProcessor: empty config\n\nconst BlockAgeProcessor = React.memo(function ({ onChange, processor }) {\n    return <NumberInput id=\"mossiness\" value={processor.mossiness} defaultValue={0.05} step={0.05} upChange={onChange}>Mossiness</NumberInput>\n});\n\nconst BlockIgnoreProcessor = React.memo(function ({ onChange, processor }) {\n    const handleChange = useCallback(blocks => onChange({ blocks }), [onChange])\n\n    return <BlocksList addButton={false} list={processor.blocks} onChange={handleChange} />\n});\n\nconst BlockRotProcessor = React.memo(function ({ onChange, processor }) {\n    return <NumberInput id=\"integrity\" value={processor.integrity} defaultValue={0.05} step={0.05} upChange={onChange}>Integrity</NumberInput>\n});\n\nconst BlockGravityProcessor = React.memo(function ({ onChange, processor }) {\n    // @todo heightmap\n    return <NumberInput id=\"offset\" value={processor.offset} upChange={onChange}>Offset</NumberInput>\n});\n\n// JigsawReplacementProcessor: empty config\n// LavaSubmergedBlockProcessor: empty config\n// NopProcessor: empty config\n\nconst RuleProcessor = React.memo(function ({ onChange, processor }) {\n    const [rules, , handleChange, handleRemove] = useCrudPreset(rules => onChange({ rules }), processor.rules, PROCESSOR_RULE_DEFAULTS);\n\n    return <div>\n        {rules.map((rule, index) =>\n            <ProcessorRule rule={rule} key={index} onChange={handleChange}>\n                <Button cat=\"danger\" onClick={e => handleRemove(e, index)}>Remove</Button>\n            </ProcessorRule>)}\n    </div>\n});\n\nconst ProcessorRule = React.memo(function ({ children, onChange, rule }) {\n    rule = useJsonEffect(rule || PROCESSOR_RULE_DEFAULTS, rule, onChange);\n\n    const handleInputPredicate = useCallback(function (input_predicate) {\n        onChange({ ...rule, input_predicate }, rule);\n    }, [onChange, rule]);\n    const handleLocationPredicate = useCallback(function (location_predicate) {\n        onChange({ ...rule, location_predicate }, rule);\n    }, [onChange, rule]);\n    const handlePositionPredicate = useCallback(function (position_predicate) {\n        onChange({ ...rule, position_predicate }, rule);\n    }, [onChange, rule]);\n    const handleOutputState = useCallback(function (output_state) {\n        onChange({ ...rule, output_state }, rule);\n    }, [onChange, rule]);\n\n    return <fieldset>\n        <legend>{children}</legend>\n        <fieldset>\n            <legend>Input predicate</legend>\n            <BlockPredicate target={rule.input_predicate} onChange={handleInputPredicate} />\n        </fieldset>\n        <div className=\"grid-2-small-1 has-gutter mbm\">\n            <fieldset>\n                <legend>Location predicate</legend>\n                <BlockPredicate target={rule.location_predicate} onChange={handleLocationPredicate} />\n            </fieldset>\n            <fieldset>\n                <legend>Position predicate</legend>\n                <PositionPredicate predicate={rule.position_predicate} className=\"\" onChange={handlePositionPredicate} />\n            </fieldset>\n        </div>\n        <fieldset>\n            <legend>Output state</legend>\n            <BlockState block={rule.output_state} onChange={handleOutputState} />\n        </fieldset>\n    </fieldset>\n});\n","import { SURFACE_BUILDER, SURFACE_TYPES_OPTIONS } from './SurfaceBuilderDefaults';\nimport React, { useCallback, useState } from 'react';\n\nimport { BlockState } from '../state/BlockState';\nimport { Button } from '../../ui/Button';\nimport { JsonViewer } from '../../ui/JsonViewer';\nimport { NamespacedKey } from '../NamespacedKey';\nimport Select from '../../ui/Select';\n\nexport function SurfaceBuilder({data = SURFACE_BUILDER, onSave}) {\n    const [state, setState] = useState(data);\n\n    const handleTypeChange = useCallback(function(option) {\n        setState(state => ({ ...state, type: option.value }));\n    }, []);\n    const handleTopMaterialChange = useCallback(function(top_material) {\n        setState(state => ({ ...state, config: { ...state.config, top_material } }));\n    }, []);\n    const handleUnderMaterialChange = useCallback(function(under_material) {\n        setState(state => ({ ...state, config: { ...state.config, under_material } }));\n    }, []);\n    const handleUnderwaterMaterialChange = useCallback(function(underwater_material) {\n        setState(state => ({ ...state, config: { ...state.config, underwater_material } }));\n    }, []);\n\n    const handleSubmit = useCallback(function(e) {\n        e.preventDefault();\n        const formData = new FormData(e.target);\n        onSave({\n            ...state,\n            key: formData.get('key')\n        });\n    }, [onSave, state]);\n\n    return <form onSubmit={handleSubmit}>\n        <NamespacedKey example=\"blackstone\" type=\"surfaces\" value={state.key} expectBreakage={typeof data.key !== 'undefined'} onSelectLoad={setState}>\n            surface builder\n            <JsonViewer data={state} />\n        </NamespacedKey>\n        \n        <div className=\"form-group\">\n            <label htmlFor=\"type\">Type</label>\n            <Select options={SURFACE_TYPES_OPTIONS} value={SURFACE_TYPES_OPTIONS.find(o => o.value === state.type)} onChange={handleTypeChange} inputId=\"type\" />\n            <p className=\"help2\"><small className=\"text-muted\">The builder type defines the shape of the surface. For example, the <em>swamp</em> type will create puddles while the <em>badlands</em> types will create small rocky peaks; the <em>nether</em> types will add a mix of nether blocks and expose more of the underneath material.</small></p>\n        </div>\n        \n        <label htmlFor=\"top_material\">Top material</label>\n        <BlockState block={state.config.top_material} className=\"\" inputId=\"top_material\" onChange={handleTopMaterialChange} />\n        <label htmlFor=\"under_material\">Under material</label>\n        <BlockState block={state.config.under_material} className=\"\" inputId=\"under_material\" onChange={handleUnderMaterialChange} />\n        <label htmlFor=\"underwater_material\">Underwater material</label>\n        <BlockState block={state.config.underwater_material} className=\"\" inputId=\"underwater_material\" onChange={handleUnderwaterMaterialChange} />\n\n        <Button type=\"submit\">Save</Button>\n    </form>;\n}","import {\n    Link,\n    Route,\n    Switch,\n    useHistory,\n    useParams\n} from 'react-router-dom';\nimport React, { Suspense, lazy, useCallback, useContext, useEffect } from 'react';\n\nimport { Button } from '../ui/Button';\nimport { ConfiguredCarverForm } from './carver/ConfiguredCarver';\nimport { DataContext } from '../context/DataContext';\nimport { DatapackForm } from './DatapackForm';\nimport { DimensionTypeForm } from './dimension/DimensionType';\nimport { Modal } from '../ui/Modal';\nimport { NavBar } from '../ui/Menu';\nimport { NoiseSettings } from './noise/NoiseSettings';\nimport { ProcessorList } from './processor/ProcessorList';\nimport { SurfaceBuilder } from './surface/SurfaceBuilder';\nimport { buildZip } from '../utils/zip';\nimport { displayNamespacedKey } from '../utils/data';\nimport { useSave } from '../hooks/context';\nimport { useToggle } from '../hooks/ui';\nimport Masonry from 'masonry-layout';\n\nconst Biome = lazy(() => import('./biome/Biome'));\nconst Dimension = lazy(() => import('./dimension/Dimension'));\nconst ConfiguredFeature = lazy(() => import('./feature/ConfiguredFeature'));\n\nexport function Datapack({ onCreate }) {\n    const context = useContext(DataContext);\n    const custom = context.custom;\n    const namespace = context.namespace;\n    const history = useHistory();\n    const [open, toggleModal] = useToggle();\n\n    const setPage = useCallback(function (e, page, index) {\n        e.preventDefault();\n        history.push(page + '/' + index);\n    }, [history]);\n    const handleNamespaceChange = useCallback(function (s) {\n        onCreate(s);\n        toggleModal();\n    }, [onCreate, toggleModal]);\n    const handleGenerateClick = useCallback(function (e) {\n        e.preventDefault();\n        buildZip(custom);\n    }, [custom]);\n\n    return <div>\n        <NavBar>\n            <nav className=\"tabs\"><ul>\n                <li><Link to=\"/\">Main</Link></li>\n                <li><Link to=\"/biome\">Biome</Link></li>\n                <li><Link to=\"/surface\">Surface builder</Link></li>\n                <li><Link to=\"/feature\">Feature</Link></li>\n                <li><Link to=\"/dimension\">Dimension</Link></li>\n                <li><Link to=\"/noise\">Noise</Link></li>\n                <li><Link to=\"/processor\">Processor</Link></li>\n            </ul></nav>\n        </NavBar>\n        {open && <Modal open={open} onClose={toggleModal}>\n            <DatapackForm onCreate={handleNamespaceChange} nav={false}></DatapackForm>\n        </Modal>}\n        <div className=\"content\"><Suspense fallback={<div>Loading...</div>}>\n            <Switch>\n                <Route exact path=\"/\">\n                    <h2>Datapack <code onClick={toggleModal}>{namespace}</code> <Button type=\"submit\" onClick={handleGenerateClick}>Generate</Button></h2>\n                    <Main custom={custom} namespace={namespace} setPage={setPage} />\n                </Route>\n                <Route path=\"/biome/:id?\">\n                    <Resource component={Biome} type=\"biome\" />\n                </Route>\n                <Route path=\"/carver/:id?\">\n                    <Resource component={ConfiguredCarverForm} type=\"carver\" />\n                </Route>\n                <Route path=\"/surface/:id?\">\n                    <Resource component={SurfaceBuilder} type=\"surface\" />\n                </Route>\n                <Route path=\"/feature/:id?\">\n                    <Resource component={ConfiguredFeature} type=\"feature\" />\n                </Route>\n                <Route path=\"/noise/:id?\">\n                    <Resource component={NoiseSettings} type=\"noise\" />\n                </Route>\n                <Route path=\"/processor/:id?\">\n                    <Resource component={ProcessorList} type=\"processor\" />\n                </Route>\n                <Route path=\"/dimension/:id?\">\n                    <Resource component={Dimension} type=\"dimension\" />\n                </Route>\n                <Route path=\"/dimension/type/:id?\">\n                    <Resource component={DimensionTypeForm} type=\"dimension_type\" />\n                </Route>\n            </Switch>\n        </Suspense></div>\n    </div>\n}\n\nfunction Resource({ component, type }) {\n    const history = useHistory();\n    const custom = useContext(DataContext).custom;\n    const { id } = useParams();\n\n    return React.createElement(component, { data: custom[type + 's'][id], onSave: useSave(type, history, id) })\n}\n\nfunction Main({namespace, onSave, setPage}) {\n\n    useEffect(() => {\n        new Masonry( '.stats', {\n        itemSelector: '.card',\n        gutter: 15\n      });\n    }, []);\n\n    return <div className=\"stats\">\n        <StatsTitle type=\"feature\" namespace={namespace} onClick={setPage} onDelete={onSave}>configured feature</StatsTitle>\n        <StatsTitle type=\"biome\" namespace={namespace} onClick={setPage} onDelete={onSave}>custom biome</StatsTitle>\n        <StatsTitle type=\"surface\" namespace={namespace} onClick={setPage} onDelete={onSave}>configured surface builder</StatsTitle>\n        \n        <StatsTitle type=\"dimension\" namespace={namespace} onClick={setPage} onDelete={onSave}>custom dimension</StatsTitle>\n        <StatsTitle type=\"noise\" namespace={namespace} onClick={setPage} onDelete={onSave}>custom noise</StatsTitle>\n        <StatsTitle type=\"dimension_type\" namespace={namespace} onClick={setPage} onDelete={onSave} invisible={true}>custom dimension type</StatsTitle>\n        \n        <StatsTitle type=\"processor\" namespace={namespace} onClick={setPage} onDelete={onSave}>custom processor list</StatsTitle>\n        <StatsTitle type=\"carver\" namespace={namespace} onClick={setPage} onDelete={onSave} invisible={true}>custom carver</StatsTitle>\n        <div>\n        </div>\n    </div>\n}\n\nfunction StatsTitle({ children, type, invisible = false, namespace }) {\n    const data = useContext(DataContext).custom[type + 's'];\n    const remove = useSave(type, useHistory());\n    if (invisible && data.length < 1) {\n        return <></>\n    }\n\n    const handleRemove = function (e, data) {\n        e.preventDefault();\n        if (window.confirm('Do you really want to remove this resource?')) {\n            delete data.key;\n            remove(data);\n        }\n    };\n\n    return <div className=\"card\">\n        <h5><strong>{data.length}</strong> {children}{data.length > 1 && 's'}</h5>\n        <ul>\n            {data.map((d, i) => {\n                const name = displayNamespacedKey(d.key, namespace);\n                return <li key={i}>\n                    <a href=\"#remove\" onClick={e => handleRemove(e, d)}>\n                        <i className=\"delete\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M6 2l2-2h4l2 2h4v2H2V2h4zM3 6h14l-1 14H4L3 6zm5 2v10h1V8H8zm3 0v10h1V8h-1z\"/></svg></i>\n                    </a>\n                    <Link to={type.replace('_', '/') + '/' + i}>{name}</Link>\n                </li>\n            })}\n        </ul>\n    </div>\n}\n","import './styles/App.scss';\n\nimport React, { useCallback } from 'react';\n\nimport { BrowserRouter } from 'react-router-dom';\nimport { DataContextProvider } from './context/DataContext';\nimport { Datapack } from './components/Datapack';\nimport { DatapackForm } from './components/DatapackForm';\nimport createPersistedState from 'use-persisted-state';\n\nconst useNamespaceState = createPersistedState('namespace');\nfunction App() {\n    const [namespace, setNamespace] = useNamespaceState(null);\n\n    const handleCreation = useCallback(function (namespace) {\n        setNamespace(namespace);\n    }, [setNamespace]);\n\n    return <DataContextProvider namespace={namespace}>\n            {namespace === null ?\n                <DatapackForm onCreate={handleCreation} />\n                :\n                <BrowserRouter basename={process.env.PUBLIC_URL}><Datapack onCreate={handleCreation} /></BrowserRouter>\n            }\n    </DataContextProvider>\n}\n\nexport default App;\n","import './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nwindow.addEventListener('load', () => {\n    document.body.classList.remove('preload');\n});\n\nReactDOM.render(\n    <App />\n,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","export const DIMENSION = {\n    generator: {\n        type: \"minecraft:noise\",\n        seed: 286956243,\n        biome_source: {\n            type: \"minecraft:fixed\",\n            seed: 286956243,\n            biome: \"minecraft:plains\"\n        },\n        settings: \"minecraft:overworld\"\n    },\n    type: \"minecraft:overworld\"\n};\n\nexport const CHUNK_GENERATOR_TYPES = [\n    { value: 'minecraft:flat', label: 'Flat chunk generator' },\n    { value: 'minecraft:debug', label: 'Debug chunk generator' },\n    { value: 'minecraft:noise', label: 'Noise chunk generator' }\n];\n\nexport const VANILLA_DIMENSION_TYPES = [\n    { value: 'minecraft:overworld', label: 'Overworld' },\n    { value: 'minecraft:overworld_caves', label: 'Overworld caves' },\n    { value: 'minecraft:the_nether', label: 'The Nether' },\n    { value: 'minecraft:the_end', label: 'The End' }\n];\n\nexport const NOISES_NAMES = [\n    'temperature_noise',\n    'humidity_noise',\n    'altitude_noise',\n    'weirdness_noise'\n];\n\nexport const MULTI_NOISE_BIOME_SOURCE = {\n    type: 'minecraft:multi_noise',\n    seed: 286956243,\n    temperature_noise: {\n        firstOctave: -7,\n        amplitudes: [1, 1]\n    },\n    humidity_noise: {\n        firstOctave: -7,\n        amplitudes: [1, 1]\n    },\n    altitude_noise: {\n        firstOctave: -7,\n        amplitudes: [1, 1]\n    },\n    weirdness_noise: {\n        firstOctave: -7,\n        amplitudes: [1, 1]\n    },\n    biomes: []\n};\n\nexport const DIMENSION_TYPE_EFFECTS = [\n    { value: 'minecraft:overworld', label: 'Overworld' },\n    { value: 'minecraft:the_nether', label: 'The Nether' },\n    { value: 'minecraft:the_end', label: 'The End' }\n];\n\nexport const DIMENSION_TYPE_INFINIBURN = [\n    { value: 'minecraft:infiniburn_overworld', label: 'Overworld' },\n    { value: 'minecraft:infiniburn_nether', label: 'The Nether' },\n    { value: 'minecraft:infiniburn_end', label: 'The End' }\n];\n\nexport const OVERWORLD_DIMENSION_TYPE = {\n    has_raids: true,\n    logical_height: 256,\n    infiniburn: \"minecraft:infiniburn_overworld\",\n    effects: \"minecraft:overworld\",\n    ambient_light: 0.0,\n    piglin_safe: false,\n    bed_works: true,\n    respawn_anchor_works: false,\n    ultrawarm: false,\n    natural: true,\n    coordinate_scale: 1,\n    min_y: 0,\n    height: 256,\n    has_skylight: true,\n    has_ceiling: false\n}\n\nexport const OVERWORLD_CAVES_DIMENSION_TYPE = { ...OVERWORLD_DIMENSION_TYPE, has_ceiling: true };\n\nexport const THE_NETHER_DIMENSION_TYPE = {\n    has_raids: false,\n    logical_height: 128,\n    infiniburn: \"minecraft:infiniburn_nether\",\n    effects: \"minecraft:the_nether\",\n    ambient_light: 0.1,\n    piglin_safe: true,\n    bed_works: false,\n    respawn_anchor_works: true,\n    ultrawarm: true,\n    natural: false,\n    coordinate_scale: 8,\n    min_y: 0,\n    height: 256,\n    fixed_time: 18000,\n    has_skylight: false,\n    has_ceiling: true\n}\n\nexport const THE_END_DIMENSION_TYPE = {\n    has_raids: true,\n    logical_height: 256,\n    infiniburn: \"minecraft:infiniburn_end\",\n    effects: \"minecraft:the_end\",\n    ambient_light: 0.0,\n    piglin_safe: false,\n    bed_works: false,\n    respawn_anchor_works: false,\n    ultrawarm: false,\n    natural: false,\n    coordinate_scale: 1,\n    min_y: 0,\n    height: 256,\n    fixed_time: 6000,\n    has_skylight: false,\n    has_ceiling: false\n}\n","import { MULTI_NOISE_BIOME_SOURCE, NOISES_NAMES } from '../components/dimension/DimensionDefaults';\n\n/**\n * @param {object} a \n * @param {object} b \n * @returns {boolean}\n */\nexport function objectsEqual(a, b) {\n    return Object.keys(a).length === Object.keys(b).length\n        && Object.keys(a).every(p => a[p] === b[p]);\n}\n\n/**\n * @param {string} str \n * @returns {string}\n */\nexport function capitalize(str) {\n    return str[0].toUpperCase() + str.substr(1);\n}\n\n/**\n * @param {string} key \n * @param {string} [defaultNamespace]\n * @returns {string}\n */\nexport function displayNamespacedKey(key = 'undefined', defaultNamespace) {\n    return key.startsWith(defaultNamespace + ':') ? key.split(':')[1] : key;\n}\n\n/**\n * @param {string} namespacedKey\n * @param {string} namespace\n * @return {string}\n */\nexport function defaultNamespace(namespacedKey, namespace = 'minecraft') {\n    if (namespacedKey.includes(':')) {\n        return namespacedKey;\n    }\n    return namespace + ':' + namespacedKey;\n}\n\nexport function getStateValue(state, properties = {}) {\n    const actual = properties[state.name];\n    switch (state.type) {\n        case 'bool':\n            return actual === 'true' ? 'true' : 'false';\n        case 'int':\n            return typeof actual === 'string' ? actual : '0';\n        default:\n            return actual || state.values[0];\n    }\n}\n\n/**\n * @param {string} namespacedKey\n * @return {boolean}\n */\nexport function isValidModKey(namespacedKey) {\n    const separatorIndex = namespacedKey.indexOf(':');\n    if (separatorIndex < 1 || separatorIndex === namespacedKey.length - 1) {\n        return false;\n    }\n    return !namespacedKey.startsWith('minecraft:') && !namespacedKey.includes(' ');\n}\n\nexport function hasDuplicatedObjects(objects) {\n    for (const a of objects) {\n        for (const b of objects) {\n            if (a !== b && objectsEqual(a, b)) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\n/**\n * @param {object} feature Unserialized feature\n * @returns {{type: string, config: object}[]} Decorators list\n */\nexport function findDecorators(feature) {\n    const decorators = [];\n\n    let f = feature;\n    (function find(obj) {\n        for (const key of Object.keys(obj)) {\n            if (key === 'decorator') {\n                decorators.unshift(obj[key]);\n                if ((obj.feature.type || obj.feature.name) !== 'minecraft:decorated') {\n                    f = obj.feature;\n                }\n            } else if (typeof obj[key] === 'object') {\n                find(obj[key]);\n            }\n        }\n    }(feature));\n\n    if (f === null) {\n        f = {};\n    }\n    return [decorators, f];\n}\n\n/**\n * @param {string|object} feature \n * @param {{type: string, config: object}[]} decorators \n * @param {string} name\n * @returns {object} Decorated feature\n */\nexport function buildDecorated(feature, decorators, name) {\n    if (decorators.length < 1) {\n        feature.key = name;\n        return feature;\n    }\n\n    const decorated = { type: 'minecraft:decorated', key: name };\n    let current = decorated;\n    decorators.forEach((decorator, i) => {\n        const f = i === (decorators.length - 1) ? feature : { type: 'minecraft:decorated' };\n        current.config = {\n            feature: f,\n            decorator\n        };\n        current = f;\n        if (i < 1 && typeof f === 'object') {\n            f.name = name;\n        }\n    });\n    return decorated;\n}\n\n/**\n * Rename object keys.\n * \n * @param {object} obj \n * @param {object} map \n * @returns {object}\n */\nfunction refitKeys(obj, map) {\n    const build = {};\n    for (const key in obj) {\n        const destKey = map[key] || key;\n\n        let value = obj[key];\n        if (typeof value === 'object') {\n            value = refitKeys(value, map);\n        }\n        build[destKey] = value;\n    }\n    return build;\n}\n\n/**\n * @param {string} group \n * @param {object} data \n * @returns {object}\n */\nexport function dataUpper(group, data) {\n    switch (group) {\n        case 'biomes':\n            // 20w30a: sky_color into effects\n            if (data.hasOwnProperty('sky_color')) {\n                data.effects.sky_color = data.sky_color;\n            }\n            return data;\n        case 'features':\n            // 20w30a: name -> type\n            const [decorators, feature] = findDecorators(data);\n            if (!feature.hasOwnProperty('type') && typeof feature === 'object') {\n                feature.type = feature.name;\n                delete feature.name;\n                return buildDecorated(\n                    feature,\n                    decorators.map(decorator => refitKeys(decorator, { name: 'type' })),\n                    data.key\n                );\n            }\n            return data;\n        case 'dimensions':\n            // 20w30a: multi_noise: firstOctave and amplitudes parameters\n            const source = data.generator.biome_source;\n            if (source.type === 'minecraft:multi_noise' && NOISES_NAMES.some(n => !source.hasOwnProperty(n))) {\n                data.generator.biome_source = { ...MULTI_NOISE_BIOME_SOURCE, ...source };\n            }\n            return data;\n        case 'dimension_types':\n            // 1.16.2-pre-2 : shrunk -> coordinate_scale\n            if (data.hasOwnProperty('shrunk')) {\n                data.coordinate_scale = data.shrunk ? 8 : 1;\n                delete data.shrunk;\n            }\n            return data;\n        default:\n            // 20w30a: name -> type\n            if (data.hasOwnProperty('name') && !data.hasOwnProperty('type')) {\n                data.type = data.name;\n            }\n            return data;\n    }\n}\n","import { useCallback, useEffect, useRef, useState } from \"react\";\n\n/**\n * @param {boolean} initial \n * @returns {[boolean, function(): void]}\n */\nexport function useToggle(initial = false) {\n    const [status, setState] = useState(initial);\n    const toggle = useCallback(function (e = null) {\n        if (e !== null && (typeof e === 'boolean' || typeof e.target.checked === 'boolean')) {\n            setState(typeof e === 'boolean' ? e : e.target.checked);\n            return;\n        }\n        \n        if (e !== null && typeof e.preventDefault === 'function') {\n            e.preventDefault();\n        }\n        setState(current => !current);\n    }, []);\n    return [status, toggle];\n}\n\n/**\n * \n * @param {string} [page] \n * @param {number} [index] \n * @returns {[string, number, function (SyntheticEvent, string, number): void]}\n */\nexport function useMenu(page = 'main', index = -1) {\n    const [state, setState] = useState({ page, index });\n\n    const setPage = function (e, page = 'main', index = -1) {\n        if (e !== null) {\n            e.preventDefault();\n        }\n        if (index < 0) {\n            setState({ page });\n        } else {\n            setState({ page, index });\n        }\n    }\n\n    return [\n        state.page,\n        state.index,\n        setPage\n    ];\n}\n\n/**\n * @param {function(HTMLCanvasElement, CanvasRenderingContext2D): void} callback\n * @returns {React.MutableRefObject}\n */\nexport function useCanvas(callback) {\n    const reference = useRef(null);\n\n    useEffect(function() {\n        const canvas = reference.current;\n        const ctx = canvas.getContext('2d');\n        callback(canvas, ctx);\n    }, [callback]);\n\n    return reference;\n}","import { ConfInput, NumberInput } from \"../../ui/Input\";\nimport { getStateValue, isValidModKey } from \"../../utils/data\";\nimport { useBlocksOptions, useCrudPreset } from \"../../hooks/form\";\nimport React, { useCallback, useContext } from \"react\";\nimport Select, { CreatableSelect } from \"../../ui/Select\";\n\n\nimport { BlockSelect } from \"./BlockPredicate\";\nimport { Button } from '../../ui/Button';\nimport { DataContext } from \"../../context/DataContext\";\n\nexport const BlockState = React.memo(function ({ block = {}, children, className = 'form-group', inputId, name, onChange, options }) {\n    const context = useContext(DataContext);\n\n    const blocks = useBlocksOptions(options);\n    const handleTypeChange = useCallback(function (option) {\n        const Name = option.value;\n        const Properties = {};\n        (context.vanilla.blocks.find(b => 'minecraft:' + b.name === Name) || { states: [] }).states.forEach(state => {\n            Properties[state.name] = getStateValue(state, block.Properties);\n        })\n        delete block.Properties;\n        if (Object.keys(Properties).length > 0) {\n            onChange({ ...block, Name, Properties }, block);\n        } else {\n            onChange({ ...block, Name }, block);\n        }\n    }, [block, context.vanilla.blocks, onChange]);\n    const handleValidNewOption = useCallback(function (string) {\n        return isValidModKey(string) && !blocks.some(o => o.value === string);\n    }, [blocks]);\n    const handleOptionCreation = useCallback(function (string) {\n        context.custom.addBlock(string);\n        onChange({ ...block, Name: string }, block);\n    }, [block, context.custom, onChange]);\n    const handlePropertiesChange = useCallback(function (properties) {\n        onChange({ ...block, Properties: { ...block.Properties, ...properties } }, block);\n    }, [block, onChange]);\n\n\n    return <div className={className}>\n        <div className=\"form-row\">\n            <div style={{ flexGrow: 1 }}><CreatableSelect isValidNewOption={handleValidNewOption} onCreateOption={handleOptionCreation} options={blocks} value={blocks.find(o => o.value === block.Name) || null} name={name} onChange={handleTypeChange} inputId={inputId} /></div>\n            {children}\n        </div>\n        <BlockStateProperties block={block.Name} properties={block.Properties} onChange={handlePropertiesChange} />\n    </div>;\n});\n\nexport const BlocksList = React.memo(function ({ addButton = true, list, onChange }) {\n    const options = useBlocksOptions();\n\n    const [blocks, handleAdd, handleChange, handleRemove] = useCrudPreset(onChange, list, function (blocks) {\n        // Get the first non taken block name\n        return { Name: (options.find(o => !blocks.some(b => b.Name === o.value)) || { value: 'minecraft:stone' }).value };\n    });\n\n    return <div className=\"form-group\">\n        {blocks.map((block, i) => {\n            const filteredOptions = options.filter(o => o.value === block.Name || !blocks.some(d => d.Name === o.value));\n            return <BlockState block={block} options={filteredOptions} key={block.Name} onChange={handleChange}>\n                <Button cat=\"danger mlm\" onClick={e => handleRemove(e, i)}>Remove</Button>\n            </BlockState>\n        })}\n        {addButton && <Button onClick={handleAdd}>Add block</Button>}\n    </div>;\n});\n\nexport const BlocksNamesList = React.memo(function ({ list, onChange }) {\n    const options = useBlocksOptions();\n\n    const [blocks, handleAdd, handleChange, handleRemove] = useCrudPreset(onChange, list, function (blocks) {\n        // Get the first non taken block name\n        return (options.find(o => !blocks.some(b => b === o.value)) || { value: 'minecraft:stone' }).value;\n    });\n\n    return <div className=\"form-group\">\n        {blocks.map((block, i) => {\n            const filteredOptions = options.filter(o => o.value === block || !blocks.some(d => d === o.value));\n            return <div className=\"form-group form-row\" key={block}>\n                <div style={{ flexGrow: 1 }}><BlockSelect block={block} options={filteredOptions} onChange={o => handleChange(o.value, block)} /></div>\n                <Button cat=\"danger mlm\" onClick={e => handleRemove(e, i)}>Remove</Button>\n            </div>\n        })}\n        <Button cat=\"primary mts\" onClick={handleAdd}>Add block</Button>\n    </div>;\n});\n\nfunction BlockStateProperties({ block, children, onChange, properties = {} }) {\n    const states = (useContext(DataContext).vanilla.blocks.find(b => 'minecraft:' + b.name === block) || { states: [] }).states;\n\n    const handlePropertyChange = useCallback(function (option) {\n        onChange({ ...properties, [option.name]: option.value.toLowerCase() });\n    }, [onChange, properties]);\n    const handleCheckboxChange = useCallback(function (e) {\n        const value = e.target.checked.toString();\n        onChange({ ...properties, [e.target.dataset.name]: value });\n    }, [onChange, properties]);\n    const handleNumberChange = useCallback(function (value) {\n        const key = Object.keys(value)[0];\n        onChange({ ...properties, [key]: value[key].toString() });\n    }, [onChange, properties]);\n\n    const selects = [];\n    states.forEach(possible => {\n        switch (possible.type) {\n            case 'bool':\n                selects.push(\n                    <ConfInput key={possible.name} id={possible.name}\n                        checked={properties[possible.name] === 'true'}\n                        onChange={handleCheckboxChange}>\n                        {possible.name}\n                    </ConfInput>\n                );\n                break;\n            case 'int':\n                let min = possible.name === 'distance' ? 1 : 0;\n                let max = possible.num_values;\n                if (possible.name !== 'distance') {\n                    max -= 1;\n                }\n                selects.push(\n                    <NumberInput key={possible.name} id={possible.name}\n                        value={properties[possible.name] || 0} upChange={handleNumberChange}\n                        min={min} max={max}>\n                        {possible.name}\n                    </NumberInput>\n                );\n                break;\n            default:\n                const options = possible.values.map(value => ({ value, name: possible.name, label: value }));\n                const defaultValue = options.find(o => o.value.toLowerCase() === properties[possible.name]) || options[0];\n                selects.push(<div key={possible.name}>\n                    <label>{possible.name}</label> : <div className=\"inbl\">\n                        <Select options={options} value={defaultValue} onChange={handlePropertyChange} />\n                    </div>\n                </div>);\n        }\n    });\n    return <div className=\"form-group form-row\">\n        {selects}{children}\n    </div>;\n}\n","import React, { useCallback } from 'react';\n\nimport { JsonView } from 'json-view-for-react'\nimport { Modal } from './Modal';\nimport { useToggle } from '../hooks/ui';\n\nexport function JsonViewer({ data }) {\n    const [open, toggleModal] = useToggle();\n\n    const obj = useCallback(function () {\n        const obj = typeof data === 'object' ? { ...data } : data();\n        delete obj.key;\n        delete obj.index;\n        return obj;\n    }, [data]);\n\n    return <>\n        <i className=\"code mls\" onClick={toggleModal}><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M.7 9.3l4.8-4.8 1.4 1.4-4 4.1 4 4-1.4 1.5L0 10l.7-.7zm18.6 1.4l.7-.7-5.5-5.5L13.1 6l4 4.1-4 4 1.4 1.5 4.8-4.8z\"/></svg></i>\n        {open &&\n            <Modal open={open} onClose={toggleModal}><JsonView obj={obj()} /></Modal>\n        }\n    </>\n}\n","import React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\n\nimport { Button } from '../ui/Button';\nimport { DataContext } from '../context/DataContext';\nimport { useKeyedListOptions } from '../hooks/context';\nimport { useToggle } from '../hooks/ui';\nimport Select from '../ui/Select';\n\nexport function NamespacedKey({ children, example = 'daily_resource', type, value = '', expectBreakage = false, inline = true, mayReplaceVanilla = true, defaultReplace = false, onChange, onSelect, onSelectLoad }) {\n    // To trigger form submit\n    const hidden = useRef(null);\n\n    // Final namespaced key\n    const [key, setKey] = useState(value);\n    const [fill, toggleFill] = useToggle(true);\n    const [mayFill, setMayFill] = useToggle(value !== '');\n\n    const options = useKeyedListOptions(type, false, !mayReplaceVanilla);\n\n    const context = useContext(DataContext);\n    const defaultNamespace = context.namespace;\n    const [replace, toggle] = useToggle(value === '' ? defaultReplace : options.some(o => key === o.value));\n\n    // Adjust value with default namespace if needed\n    const handleKeyChange = useCallback(function (e) {\n        const value = e.target.value.toLowerCase();\n        if (value.includes(':')) {\n            setKey(value);\n        } else {\n            setKey(defaultNamespace + ':' + value);\n        }\n    }, [defaultNamespace, setKey]);\n\n    const handleReplaceTargetChange = useCallback((selected) => {\n        const key = selected.value;\n        setKey(key);\n        setMayFill(true);\n        if (typeof onSelect === 'function') {\n            onSelect(key);\n        }\n        if (fill && typeof onSelectLoad === 'function') {\n            context.vanilla.getVanillaResource(type, key)\n                .then(onSelectLoad)\n                .then(setMayFill)\n                .catch(console.error);\n        }\n    }, [context.vanilla, fill, onSelect, onSelectLoad, setKey, setMayFill, type]);\n\n    // Fire onChange\n    useEffect(function() {\n        if (typeof onChange === 'function' && key !== value) {\n            onChange(key);\n        }\n    }, [key, onChange, value]);\n\n    // Allow form submit by pressing enter\n    const handleKeyDown = useCallback(function (e) {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            const form = hidden.current.form;\n            if (form !== null && form.checkValidity()) {\n                form.dispatchEvent(new Event('submit', { bubbles: true, cancelable: true }));\n            }\n        }\n    }, []);\n\n    // Remove the \"minecraft:\" part when changing mode\n    const handleToggle = useCallback(function (e) {\n        if (replace && key.startsWith('minecraft:')) {\n            setKey(key => defaultNamespace + ':' + key.split(':')[1]);\n        }\n        toggle(e);\n    }, [defaultNamespace, key, setKey, replace, toggle]);\n\n    const handleFillToggle = useCallback(function (e) {\n        if (e.target.checked && mayFill && typeof onSelectLoad === 'function') {\n            context.vanilla.getVanillaResource(type, key)\n                .then(onSelectLoad)\n                .then(setMayFill)\n                .catch(console.error);\n        }\n        toggleFill(e);\n    }, [context.vanilla, key, mayFill, onSelectLoad, setMayFill, toggleFill, type]);\n\n    // Displayed input value - trim namespace if default\n    const inputValue = useMemo(function () {\n        if (key.startsWith(defaultNamespace + ':')) {\n            return key.split(':')[1];\n        }\n        return key;\n    }, [defaultNamespace, key]);\n\n    // Hidden input value - set to empty when nothing is selected (keeps the key from text mode)\n    const hiddenInputValue = useMemo(function () {\n        if (replace && !options.some(o => o.value === key)) {\n            return '';\n        }\n        return key;\n    }, [key, options, replace]);\n\n    // Adapt select width to its content\n    const style = useMemo(function () {\n        let width = 8 * Math.max.apply(Math, options.map(o => o.label.length)) + 60;\n        if (!isFinite(width)) {\n            width = '250px';\n        }\n        return { width };\n    }, [options]);\n\n    return <>\n        {typeof children !== 'undefined' && <h3>{(typeof value === 'undefined' || value === '') ? 'Create new ' : 'Edit '}{children}</h3>}\n        <div className=\"form-group\">\n            <label htmlFor=\"key\">{replace ? 'Replace' : 'Key'}</label> :&nbsp;\n            {replace && <div className=\"inbl\" style={style}>\n                <Select options={options} value={options.find(o => key === o.value)} onChange={handleReplaceTargetChange} inputId=\"key\" />\n            </div>}\n            {!replace &&\n                <input type=\"text\" id=\"key\" required pattern=\"^([\\w.-]+:[\\w/.-]+)$|^[\\w/.-]+$\" placeholder={`Example: ${example}`}\n                    autoCapitalize=\"none\" spellCheck=\"false\" autoComplete=\"off\" value={inputValue}\n                    onChange={handleKeyChange} onKeyPress={handleKeyDown} />\n            }\n            <input type={replace ? 'text' : 'hidden'} name=\"key\" value={hiddenInputValue} onChange={console.log} ref={hidden}\n                required tabIndex=\"-1\" style={{ opacity: 0, height: 0, position: 'absolute' }} />\n            {mayReplaceVanilla && <Button cat=\"info mlm\" onClick={handleToggle}>{replace ? 'Create a new one' : 'Replace vanilla'}</Button>}\n            {!inline && <br />}{replace && <><input type=\"checkbox\" className=\"checkbox mls\" id=\"fill-values\" checked={fill} onChange={handleFillToggle} /> Fill with values</>}\n        \n            {expectBreakage && value !== key && !key.startsWith('minecraft:') &&\n                <p className=\"alert--warning\">Warning: changing the name of a resource may break other resources that depend on it.</p>\n            }\n            {!mayReplaceVanilla && !replace && key.startsWith('minecraft:') &&\n                <p className=\"alert--warning\">Warning: datapacks cannot currently replace vanilla {type}.</p>\n            }\n        </div>\n    </>;\n}","export const VANILLA_PROCESSORS = [\n    'empty',\n    'zombie_plains',\n    'zombie_savanna',\n    'zombie_snowy',\n    'zombie_taiga',\n    'zombie_desert',\n    'mossify_10_percent',\n    'mossify_20_percent',\n    'mossify_70_percent',\n    'street_plains',\n    'street_savanna',\n    'street_snowy_or_taiga',\n    'farm_plains',\n    'farm_savanna',\n    'farm_snowy',\n    'farm_taiga',\n    'farm_desert',\n    'outpost_rot',\n    'bottom_rampart',\n    'treasure_rooms',\n    'housing',\n    'side_wall_degradation',\n    'stable_degradation',\n    'bastion_generic_degradation',\n    'rampart_degradation',\n    'entrance_replacement',\n    'bridge',\n    'roof',\n    'high_wall',\n    'high_rampart'\n].map(processor_list => ({ value: 'minecraft:' + processor_list, label: processor_list }));\n\nexport const PROCESSORS_OPTIONS = [\n    { value: 'blackstone_replace', label: 'Blackstone replace' },\n    { value: 'block_age', label: 'Block age' },\n    { value: 'block_ignore', label: 'Block ignore' },\n    { value: 'block_rot', label: 'Block rot' },\n    { value: 'gravity', label: 'Gravity' },\n    { value: 'jigsaw_replacement', label: 'Jigsaw replacement' },\n    { value: 'lava_submerged_block', label: 'Lava submerged block' },\n    { value: 'nop', label: 'Nop' },\n    { value: 'rule', label: 'Rule' }\n].map(o => {\n    o.value = 'minecraft:' + o.value;\n    return o;\n});\n\nexport const PROCESSOR_RULE_DEFAULTS = {\n    output_state: {\n        Properties: {\n            age: \"0\"\n        },\n        Name: \"minecraft:potatoes\"\n    },\n    input_predicate: {\n        block: \"minecraft:wheat\",\n        probability: 0.2,\n        predicate_type: \"minecraft:random_block_match\"\n    },\n    location_predicate: {\n        predicate_type: \"minecraft:always_true\"\n    }\n};\n","export const INT_MIN_VALUE = 0x80000000 & 0x80000000;\nexport const INT_MAX_VALUE = 0x7FFFFFFF;\n\n/**\n * @param {number} n \n * @returns {number}\n */\nexport function maintainPrecision(n) {\n    try {\n        return parseFloat(n.toFixed(12));\n    } catch (e) {\n        console.error(e);\n        return n;\n    }\n}\n\n/**\n * @param {number} t \n * @returns {number}\n */\nexport function perlinFade(t) {\n    return t * t * t * (t * (t * 6 - 15) + 10);\n}\n\nexport function lerp(delta, start, end) {\n    return start + delta * (end - start);\n}\n\nexport function lerp2(deltaX, deltaY, n00, n10, n01, n11) {\n    return lerp(deltaY, lerp(deltaX, n00, n10), lerp(deltaX, n01, n11));\n}\n\nexport function lerp3(deltaX, deltaY, deltaZ, n000, n100, n010, n110, n001, n101, n011, n111) {\n    return lerp(deltaZ, lerp2(deltaX, deltaY, n000, n100, n010, n110), lerp2(deltaX, deltaY, n001, n101, n011, n111));\n}\n\nexport function grad(hash, x, y, z) {\n    const h = hash & 15;\n    const u = h < 8 ? x : y;\n    const v = h < 4 ? y : h === 12 || h === 14 ? x : z;\n    return ((h & 1) === 0 ? u : -u) + ((h & 2) === 0 ? v : -v);\n}\n","import React, { useEffect } from 'react';\n\nimport { Button } from './Button';\nimport { createPortal } from 'react-dom';\nimport useModal from '@delangle/use-modal';\n\nexport const Modal = ({ children, open, onClose }) => {\n    const modal = useModal({ open, onClose: () => onClose(false) });\n\n    const el = document.createElement('div');\n    el.classList.add('modal-wrapper');\n\n    useEffect(() => {\n        document.body.appendChild(el);\n        return () => document.body.removeChild(el);\n    }, [el]);\n\n    return createPortal(\n        <dialog open={modal.state === 'opened'}>\n            <Button cat=\"close\" onClick={onClose}></Button>\n            {children}\n        </dialog>\n    , el);\n}\n","export const VANILLA_NOISES = [\n    { value: 'minecraft:overworld', label: 'Overworld' },\n    { value: 'minecraft:nether', label: 'Nether' },\n    { value: 'minecraft:end', label: 'End' },\n    { value: 'minecraft:amplified', label: 'Amplified' },\n    { value: 'minecraft:caves', label: 'Caves' },\n    { value: 'minecraft:floating_islands', label: 'Floating islands' }\n];\n\nexport const STRUCTURES = [\n    \"ocean_ruin\",\n    \"bastion_remnant\",\n    \"fortress\",\n    \"nether_fossil\",\n    \"igloo\",\n    \"shipwreck\",\n    \"swamp_hut\",\n    \"jungle_pyramid\",\n    \"village\",\n    \"ruined_portal\",\n    \"endcity\",\n    \"buried_treasure\",\n    \"mansion\",\n    \"monument\",\n    \"stronghold\",\n    \"pillager_outpost\",\n    \"desert_pyramid\",\n    \"mineshaft\"\n].map(tag => ({ value: 'minecraft:' + tag, label: tag }));;\n\nexport const OVERWORLD_NOISE = {\n    bedrock_roof_position: -10,\n    bedrock_floor_position: 0,\n    sea_level: 63,\n    disable_mob_generation: false,\n    structures: {\n        stronghold: {\n            distance: 32,\n            spread: 3,\n            count: 128\n        },\n        structures: {\n            \"minecraft:ocean_ruin\": {\n                spacing: 20,\n                separation: 8,\n                salt: 14357621\n            },\n            \"minecraft:bastion_remnant\": {\n                spacing: 27,\n                separation: 4,\n                salt: 30084232\n            },\n            \"minecraft:fortress\": {\n                spacing: 27,\n                separation: 4,\n                salt: 30084232\n            },\n            \"minecraft:nether_fossil\": {\n                spacing: 2,\n                separation: 1,\n                salt: 14357921\n            },\n            \"minecraft:igloo\": {\n                spacing: 32,\n                separation: 8,\n                salt: 14357618\n            },\n            \"minecraft:shipwreck\": {\n                spacing: 24,\n                separation: 4,\n                salt: 165745295\n            },\n            \"minecraft:swamp_hut\": {\n                spacing: 32,\n                separation: 8,\n                salt: 14357620\n            },\n            \"minecraft:jungle_pyramid\": {\n                spacing: 32,\n                separation: 8,\n                salt: 14357619\n            },\n            \"minecraft:village\": {\n                spacing: 32,\n                separation: 8,\n                salt: 10387312\n            },\n            \"minecraft:ruined_portal\": {\n                spacing: 40,\n                separation: 15,\n                salt: 34222645\n            },\n            \"minecraft:endcity\": {\n                spacing: 20,\n                separation: 11,\n                salt: 10387313\n            },\n            \"minecraft:buried_treasure\": {\n                spacing: 1,\n                separation: 0,\n                salt: 0\n            },\n            \"minecraft:mansion\": {\n                spacing: 80,\n                separation: 20,\n                salt: 10387319\n            },\n            \"minecraft:monument\": {\n                spacing: 32,\n                separation: 5,\n                salt: 10387313\n            },\n            \"minecraft:stronghold\": {\n                spacing: 1,\n                separation: 0,\n                salt: 0\n            },\n            \"minecraft:pillager_outpost\": {\n                spacing: 32,\n                separation: 8,\n                salt: 165745296\n            },\n            \"minecraft:desert_pyramid\": {\n                spacing: 32,\n                separation: 8,\n                salt: 14357617\n            },\n            \"minecraft:mineshaft\": {\n                spacing: 1,\n                separation: 0,\n                salt: 0\n            }\n        }\n    },\n    noise: {\n        height: 256,\n        sampling: {\n            xz_scale: 1,\n            y_scale: 1,\n            xz_factor: 80.0,\n            y_factor: 160.0\n        },\n        top_slide: {\n            target: -10,\n            size: 3,\n            offset: 0\n        },\n        bottom_slide: {\n            target: -30,\n            size: 0,\n            offset: 0\n        },\n        size_horizontal: 1,\n        size_vertical: 2,\n        density_factor: 1.0,\n        density_offset: -0.47,\n        simplex_surface_noise: true\n    },\n    default_block: {\n        Name: \"minecraft:stone\"\n    },\n    default_fluid: {\n        Properties: {\n            level: \"0\"\n        },\n        Name: \"minecraft:water\"\n    }\n}\n","export const VANILLA_SURFACE_BUILDERS = [\n    { value: 'badlands', label: 'Badlands' },\n    { value: 'basalt_deltas', label: 'Basalt Deltas' },\n    { value: 'crimson_forest', label: 'Crimson forest' },\n    { value: 'desert', label: 'Desert' },\n    { value: 'end', label: 'End' },\n    { value: 'eroded_badlands', label: 'Eroded Badlands' },\n    { value: 'frozen_ocean', label: 'Frozen ocean' },\n    { value: 'full_sand', label: 'Full sand' },\n    { value: 'giant_tree_taiga', label: 'Giant tree taiga' },\n    { value: 'grass', label: 'Grass' },\n    { value: 'gravelly_mountain', label: 'Gravelly mountain' },\n    { value: 'ice_spikes', label: 'Ice spikes' },\n    { value: 'mountain', label: 'Mountain' },\n    { value: 'mycelium', label: 'Mycelium' },\n    { value: 'nether', label: 'Nether' },\n    { value: 'nope', label: 'Nope' },\n    { value: 'ocean_sand', label: 'Ocean sand' },\n    { value: 'shattered_savanna', label: 'Shattered savanna' },\n    { value: 'soul_sand_valley', label: 'Soul sand valley' },\n    { value: 'stone', label: 'Stone' },\n    { value: 'swamp', label: 'Swamp' },\n    { value: 'warped_forest', label: 'Warped forest' },\n    { value: 'wooded_badlands', label: 'Wooded badlands' },\n].map(option => {\n    option.value = 'minecraft:' + option.value;\n    return option;\n});\n\nexport const SURFACE_TYPES_OPTIONS = [\n    { value: 'default', label: 'Default' },\n    { value: 'mountain', label: 'Mountain' },\n    { value: 'shattered_savanna', label: 'Shattered savanna' },\n    { value: 'gravelly_mountain', label: 'Gravelly mountain' },\n    { value: 'giant_tree_taiga', label: 'Giant tree taiga' },\n    { value: 'swamp', label: 'Swamp' },\n    { value: 'badlands', label: 'Badlands' },\n    { value: 'wooded_badlands', label: 'Wooded badlands' },\n    { value: 'eroded_badlands', label: 'Eroded badlands' },\n    { value: 'frozen_ocean', label: 'Frozen ocean' },\n    { value: 'nether', label: 'Nether' },\n    { value: 'nether_forest', label: 'Nether forest' },\n    { value: 'soul_sand_valley', label: 'Soul sand valley' },\n    { value: 'basalt_deltas', label: 'Basalt deltas' },\n    { value: 'nope', label: 'Nope' }\n].map(option => {\n    option.value = 'minecraft:' + option.value;\n    return option;\n});\n\nexport const SURFACE_BUILDER = {\n    config: {\n        top_material: {\n            Properties: {\n                snowy: \"false\"\n            },\n            Name: \"minecraft:grass_block\"\n        },\n        under_material: {\n            Name: \"minecraft:dirt\"\n        },\n        underwater_material: {\n            Name: \"minecraft:gravel\"\n        }\n    },\n    type: \"minecraft:default\"\n}","export const TAGS_OPTIONS = [\n    'acacia_logs',\n    'anvil',\n    'bamboo_plantable_on',\n    'banners',\n    'base_stone_nether',\n    'base_stone_overworld',\n    'beacon_base_blocks',\n    'beds',\n    'bee_growables',\n    'beehives',\n    'birch_logs',\n    'buttons',\n    'campfires',\n    'carpets',\n    'climbable',\n    'coral_blocks',\n    'coral_plants',\n    'corals',\n    'crimson_stems',\n    'crops',\n    'dark_oak_logs',\n    'doors',\n    'dragon_immune',\n    'enderman_holdable',\n    'fence_gates',\n    'fences',\n    'fire',\n    'flower_pots',\n    'flowers',\n    'gold_ores',\n    'guarded_by_piglins',\n    'hoglin_repellents',\n    'ice',\n    'impermeable',\n    'infiniburn_end',\n    'infiniburn_nether',\n    'infiniburn_overworld',\n    'jungle_logs',\n    'leaves',\n    'logs',\n    'logs_that_burn',\n    'mushroom_grow_block',\n    'non_flammable_wood',\n    'nylium',\n    'oak_logs',\n    'piglin_repellents',\n    'planks',\n    'portals',\n    'pressure_plates',\n    'prevent_mob_spawning_inside',\n    'rails',\n    'sand',\n    'saplings',\n    'shulker_boxes',\n    'signs',\n    'slabs',\n    'small_flowers',\n    'soul_fire_base_blocks',\n    'soul_speed_blocks',\n    'spruce_logs',\n    'stairs',\n    'standing_signs',\n    'stone_bricks',\n    'stone_pressure_plates',\n    'strider_warm_blocks',\n    'tall_flowers',\n    'trapdoors',\n    'underwater_bonemeals',\n    'unstable_bottom_center',\n    'valid_spawn',\n    'wall_corals',\n    'wall_post_override',\n    'wall_signs',\n    'walls',\n    'warped_stems',\n    'wart_blocks',\n    'wither_immune',\n    'wither_summon_base_blocks',\n    'wooden_buttons',\n    'wooden_doors',\n    'wooden_fences',\n    'wooden_pressure_plates',\n    'wooden_slabs',\n    'wooden_stairs',\n    'wooden_trapdoors',\n    'wool'\n].map(tag => ({ value: 'minecraft:' + tag, label: tag }));\n","import {DataContext} from \"../../context/DataContext\";\nimport {isValidModKey} from \"../../utils/data\";\nimport {useBlocksOptions} from \"../../hooks/form\";\nimport React, {useCallback, useContext, useMemo} from \"react\";\n\nimport { BlockState } from \"./BlockState\";\nimport { NumberInput } from \"../../ui/Input\";\nimport { TAGS_OPTIONS } from \"./Tags\";\nimport Select, {CreatableSelect} from \"../../ui/Select\";\n\nexport const BlockPredicate = React.memo(function({target, onChange}) {\n    const options = useMemo(function() {\n        return [\n            { value: 'minecraft:always_true', label: 'Always true' },\n            { value: 'minecraft:block_match', label: 'Block match' },\n            { value: 'minecraft:blockstate_match', label: 'Block state match' },\n            { value: 'minecraft:random_block_match', label: 'Random block match' },\n            { value: 'minecraft:random_blockstate_match', label: 'Random block state match' },\n            { value: 'minecraft:tag_match', label: 'Tag match' }\n        ];\n    }, []);\n\n    const handleTypeChange = useCallback(function(option) {\n        onChange({ predicate_type: option.value });\n    }, [onChange]);\n    const handleBlockChange = useCallback(function(option) {\n        onChange({ ...target, block: option.value });\n    }, [target, onChange]);\n    const handleBlockStateChange = useCallback(function(block_state) {\n        onChange({ ...target, block_state });\n    }, [target, onChange]);\n    const handleTagChange = useCallback(function(option) {\n        onChange({ ...target, tag: option.value });\n    }, [target, onChange]);\n    const handleChange = useCallback(function(content) {\n        onChange({ ...target, ...content });\n    }, [target, onChange]);\n\n    const type = target.predicate_type;\n\n    return <div>\n        <label>Predicate type</label>\n        <Select options={options} value={options.find(o => o.value === type)} onChange={handleTypeChange} />\n        {type === 'minecraft:block_match' && <BlockSelect block={target.block} onChange={handleBlockChange} />}\n        {type === 'minecraft:blockstate_match' && <BlockState block={target.block_state} onChange={handleBlockStateChange} />}\n        {(type === 'minecraft:random_block_match' || type === 'minecraft:random_blockstate_match') &&\n            <RandomBlockMatch block={target.block} probability={target.probability} onChange={handleChange} type={type} />\n        }\n        {type === 'minecraft:tag_match' && <Select options={TAGS_OPTIONS} value={TAGS_OPTIONS.find(t => t.value === target.tag)} onChange={handleTagChange} />}\n    </div>;\n});\n\nconst RandomBlockMatch = React.memo(function({block, onChange, type, probability}) {\n    const handleBlockChange = useCallback(function(option) {\n        onChange({ block: option.value });\n    }, [onChange]);\n    const handleBlockStateChange = useCallback(function(block_state) {\n        onChange({ block_state });\n    }, [onChange]);\n\n    return <div className=\"form-group form-row\">\n        <div style={{ flexGrow: 1 }}>\n        {type === 'minecraft:random_block_match' && <BlockSelect block={block} onChange={handleBlockChange} />}\n        {type === 'minecraft:random_blockstate_match' && <BlockState block={block} onChange={handleBlockStateChange} />}\n        </div>\n        <NumberInput id=\"probability\" value={probability} defaultValue=\"0.1\"\n            step=\"0.01\" min=\"0\" max=\"1\" className=\"mlm\" upChange={onChange}>\n                Probability\n        </NumberInput>\n    </div>\n});\n\nexport const BlockSelect = React.memo(function({block, inputId, onChange, options}) {\n    const blocks = useBlocksOptions(options);\n    const context = useContext(DataContext);\n\n    const handleValidNewOption = useCallback(function (string) {\n        return isValidModKey(string) && !blocks.some(o => o.value === string);\n    }, [blocks]);\n    const handleOptionCreation = useCallback(function (string) {\n        context.custom.addBlock(string);\n        onChange({ value: string, label: string });\n    }, [context.custom, onChange]);\n\n    return <CreatableSelect isValidNewOption={handleValidNewOption} onCreateOption={handleOptionCreation} options={blocks} value={blocks.find(b => b.value === block)} onChange={onChange} inputId={inputId} />;\n});\n","import { INT_MAX_VALUE, maintainPrecision } from '../utils/math';\nimport { hexColorToInteger, integerColorToHex } from '../utils/color';\nimport React, { useCallback, useEffect, useState } from 'react';\n\nexport const ConfInput = React.memo(function ({\n    attr, type,\n    checked, defaultChecked,\n    children,\n    name, id,\n    onChange,\n    value, defaultValue,\n    min, max, step,\n    className, style\n}) {\n\n    const uId = name || Math.random().toString(36).substr(2, 5) + '-' + id;\n\n    if (typeof type !== 'string') {\n        if (typeof checked !== 'undefined' || typeof defaultChecked !== 'undefined') {\n            type = 'checkbox';\n        } else if (typeof step === 'number' || typeof max === 'number' || !isNaN(typeof value === 'undefined' ? defaultValue : value)) {\n            type = 'number';\n        } else {\n            type = 'text';\n        }\n    }\n\n    if (type === 'checkbox') {\n        return <div className={className}>\n            <label htmlFor={uId}>{children}</label>&nbsp;:&nbsp;<input type={type || 'checkbox'} data-name={name || id} name={name} id={uId} className=\"checkbox\" {...{ ...attr, checked, defaultChecked, onChange, value, style }} />\n        </div>\n    }\n    return <div className={className}>\n        {typeof children === 'undefined' || <><label htmlFor={uId}>{children}</label> : </>}\n        <input\n            type={type} data-name={name || id} name={name} id={uId}\n            {...{ ...attr, value, onChange, defaultValue, min, max, step, style }} />\n    </div>\n});\n\nexport const NumberInput = React.memo(function ({\n    className, style = {}, children, defaultValue = 0,\n    id, name, onChange, upChange,\n    required = true, title, value,\n    type = 'number', step = 1, min = 0, max = INT_MAX_VALUE\n}) {\n\n    const uId = name || Math.random().toString(36).substr(2, 5) + '-' + id;\n    const n = parseFloat(typeof value === 'number' || typeof value === 'string' ? value : defaultValue);\n    const [val, setValue] = useState(n);\n    const [prevVal, setPrevValue] = useState(n);\n    const [click, setClick] = useState(null);\n\n    value = parseFloat(value);\n    min = parseFloat(min);\n    step = parseFloat(step);\n    max = parseFloat(max);\n\n    if (n !== prevVal && n !== val && !isNaN(val) && val !== '') {\n        setValue(n);\n        setPrevValue(n);\n    }\n\n    const handleChange = useCallback(function (e) {\n        const value = e.target.value;\n        const n = parseFloat(value);\n        if (value === '') {\n            setValue(value);\n        } else if (value.length <= INT_MAX_VALUE.toString().length) {\n            if (value.endsWith('.00001')) {\n                // Fix browser step\n                setValue(val => maintainPrecision(val + (n > val ? step : -step)));\n            } else {\n                setValue(value);\n            }\n        }\n    }, [step]);\n\n    const stepUpDown = useCallback(function (addition) {\n        setValue(val => {\n            if (!isNaN(val)) {\n                const n = maintainPrecision(val + (addition ? step : -step));\n                if (n >= min && n <= max) {\n                    return n;\n                }\n                return val;\n            }\n            return val;\n        });\n    }, [max, min, step]);\n\n    const handleMouseDown = useCallback(function (e) {\n        e.preventDefault();\n        const addition = e.target.classList.contains('btn-plus');\n        if (val === '') {\n            return;\n        }\n        stepUpDown(addition);\n        setClick(window.setInterval(() => stepUpDown(addition), 150));\n    }, [stepUpDown, val]);\n\n    const handleClick = useCallback(function (e) {\n        e.preventDefault();\n    }, []);\n\n    const handleMouseUp = useCallback(function (e) {\n        e.preventDefault();\n        window.clearInterval(click);\n        setClick(null);\n    }, [click]);\n\n    useEffect(function () {\n        let n = val;\n        if (typeof n === 'string') {\n            const value = val.replace(',', '.');\n            const parse = typeof step === 'undefined' ? parseInt : parseFloat;\n            n = parse(value);\n        }\n\n        if (isNaN(value) && n === defaultValue && !required) {\n            return;\n        }\n\n        if (!isNaN(n) && val !== value && n >= min && n <= max && click === null) {\n            if (typeof upChange === 'function') {\n                upChange({ [id || name]: n });\n            } else if (typeof onChange === 'function') {\n                onChange(n);\n            }\n        }\n    }, [click, defaultValue, id, min, max, name, onChange, required, step, type, upChange, val, value]);\n\n    style.width = getNumberSize(val, max, step);\n    className = (className || '') + ' number-wrapper';\n\n    return <div className={className} title={title}>\n        {typeof children === 'undefined' || <div className=\"label\"><label htmlFor={uId}>{children}</label> :&nbsp;</div>}\n            <div className=\"number-input-wrapper\"><input\n                type={type} name={name} id={uId} style={style}\n                min={min} max={max}\n                value={val} data-name={name || id} required={required}\n                step={step < 1 ? 'any' : step} onChange={handleChange}\n            />\n            {type === 'number' &&\n                <div className=\"number-controls\">\n                    <button className=\"btn-plus\" tabIndex=\"-1\" onMouseDown={handleMouseDown} onClick={handleClick} onMouseOut={handleMouseUp} onMouseUp={handleMouseUp}></button>\n                    <button className=\"btn-minus\" tabIndex=\"-1\" onMouseDown={handleMouseDown} onClick={handleClick} onMouseOut={handleMouseUp} onMouseUp={handleMouseUp}></button>\n                </div>\n            }</div>\n    </div>\n});\n\nexport const ColorInput = React.memo(function({ children, defaultValue = 0, id, onChange, upChange, value }) {\n    const uId = Math.random().toString(36).substr(2, 5) + '-' + id;\n\n    const handleChange = useCallback(function(e) {\n        const value = e.target.value;\n\n        if (typeof upChange === 'function') {\n            upChange({ [id]: hexColorToInteger(value) });\n        } else if (typeof onChange === 'function') {\n            onChange(hexColorToInteger(value));\n        }\n    }, [id, onChange, upChange]);\n\n    \n    useEffect(() => {\n        if (typeof value !== 'number' && defaultValue !== 0) {\n            if (typeof upChange === 'function') {\n                upChange({ [id]: parseFloat(defaultValue) });\n            } else if (typeof onChange === 'function') {\n                onChange(parseFloat(defaultValue));\n            }\n        }\n    }, [defaultValue, id, onChange, upChange, value]);\n\n    return <div>\n        {typeof children === 'undefined' || <><label htmlFor={uId}>{children}</label> : </>}\n        <input type=\"color\" id={uId} data-name={id} onChange={handleChange} value={integerColorToHex(value || defaultValue)} />\n    </div>\n});\n\nfunction getNumberSize(numeric, max = 10, step = 1) {\n    if (numeric === '') {\n        return 12 + 'ch';\n    }\n    const decimals = countDecimals(step);\n\n    let n, str;\n    if (typeof numeric === 'number') {\n        n = numeric;\n        str = numeric.toString();\n    } else {\n        n = parseFloat(numeric);\n        str = numeric;\n    }\n\n    let length = str.length;\n    if (!isNaN(n)) {\n        length = Math.max(length, n.toFixed(decimals).toString().length);\n    }\n    const ceil = max > 9 && n < 10;\n    const smooth = step === 1 ? 4 : 2;\n    return length + smooth + (ceil ? 1 : 0) + 'ch';\n}\nfunction countDecimals(n) {\n    if (typeof n !== 'number') {\n        return 0;\n    }\n    if ((n % 1) !== 0)\n        return n.toString().split(\".\")[1].length;\n    return 0;\n}\n","export const VANILLA_CARVERS = [\n    { value: 'canyon', label: 'Canyon', probability: 0.02 },\n    { value: 'cave', label: 'Cave', probability: 0.143 },\n    { value: 'nether_cave', label: 'Nether cave', probability: 0.2 },\n    { value: 'underwater_canyon', label: 'Underwater canyon', probability: 0.02  },\n    { value: 'underwater_cave', label: 'Underwater cave', probability: 0.067 }\n].map(option => {\n    option.value = 'minecraft:' + option.value;\n    return option;\n});\n","const namespace = '%namespace%';\nexport const PATHS = {\n    dimensions: `data/${namespace}/dimension`,\n    dimension_types: `data/${namespace}/dimension_type`,\n    biomes: `data/${namespace}/worldgen/biome`,\n    carvers: `data/${namespace}/worldgen/configured_carver`,\n    features: `data/${namespace}/worldgen/configured_feature`,\n    surfaces: `data/${namespace}/worldgen/configured_surface_builder`,\n    noises: `data/${namespace}/worldgen/noise_settings`,\n    processors: `data/${namespace}/worldgen/processor_list`\n};\n\n/**\n * @param {('dimensions'|'dimension_types'|'biomes'|'carvers'|'features'|'surfaces'|'noises'|'processors')} type \n * @param {string} namespace \n * @param {string} identifier \n * @returns {string}\n */\nexport function getAbsolutePath(type, namespace, identifier) {\n    return PATHS[type].replace('%namespace%', namespace) + '/' + identifier + '.json';\n}\n","export function hexColorToInteger(color) {\n    return parseInt(color.replace(/^#/, ''), 16);\n}\n\nexport function integerColorToHex(color) {\n    return '#' + (color & 0xFFFFFF).toString(16).padStart(6, '0');\n}","import React from 'react';\n\nexport function Button ({loading, cat = 'primary', ...buttonProps}) {\n    return <button className={`btn btn--${cat}`} {...buttonProps} tabIndex=\"0\"></button>\n}\n","import { ConfInput, NumberInput } from '../../ui/Input';\nimport { DIMENSION_TYPE_EFFECTS, DIMENSION_TYPE_INFINIBURN, OVERWORLD_CAVES_DIMENSION_TYPE, OVERWORLD_DIMENSION_TYPE, THE_END_DIMENSION_TYPE, THE_NETHER_DIMENSION_TYPE } from './DimensionDefaults';\nimport React, { useCallback, useContext, useState } from 'react';\n\nimport { Button } from '../../ui/Button';\nimport { DataContext } from '../../context/DataContext';\nimport { JsonViewer } from '../../ui/JsonViewer';\nimport { Modal } from '../../ui/Modal';\nimport { NamespacedKey } from '../NamespacedKey';\nimport { useKeyedListOptions } from '../../hooks/context';\nimport { useToggle } from '../../hooks/ui';\nimport Select from '../../ui/Select';\n\nexport function DimensionType({ type = 'minecraft:overworld', onChange }) {\n    const [open, toggleModal] = useToggle();\n    const options = useKeyedListOptions('dimension_types').map(option => {\n        option.resource = option.value;\n        return option;\n    });\n\n    if (typeof type === 'object') {\n        options.push({ value: 'inline', label: 'inline', resource: type });\n    }\n\n    const handleTypeChange = useCallback(function (option) {\n        onChange(option.resource);\n    }, [onChange]);\n    const handleNewClick = useCallback(function (e) {\n        e.preventDefault();\n        toggleModal(true);\n    }, [toggleModal]);\n    const handleTypeCreated = useCallback(function (type) {\n        onChange(type.key);\n        toggleModal(false);\n    }, [onChange, toggleModal]);\n\n    return <div className=\"form-group\">\n        <label htmlFor=\"dimension-type\">Dimension type <Button onClick={handleNewClick}>Create new</Button></label>\n        <Select inputId=\"dimension-type\" options={options} value={options.find(o => o.resource === type)} onChange={handleTypeChange} />\n        {open && <Modal open={open} onClose={toggleModal}>\n            <DimensionTypeForm onSave={handleTypeCreated} />\n        </Modal>}\n    </div>;\n}\n\nexport function DimensionTypeForm({ data = OVERWORLD_DIMENSION_TYPE, onSave }) {\n    const [config, setConfig] = useState(data);\n\n    const handleVanillaSelect = useCallback(function (value) {\n        setConfig({\n            ...{\n                'minecraft:overworld': OVERWORLD_DIMENSION_TYPE,\n                'minecraft:overworld_caves': OVERWORLD_CAVES_DIMENSION_TYPE,\n                'minecraft:the_nether': THE_NETHER_DIMENSION_TYPE,\n                'minecraft:the_end': THE_END_DIMENSION_TYPE\n            }[value]\n        });\n    }, []);\n    const handleNumberChange = useCallback(function (value) {\n        setConfig(config => ({ ...config, ...value }))\n    }, []);\n    const handleSelectChange = useCallback(function (name, option) {\n        setConfig(config => ({ ...config, [name]: option.value }))\n    }, []);\n    const handleCheckboxChange = useCallback(function (e) {\n        const name = e.target.dataset.name;\n        const checked = e.target.checked;\n        setConfig(config => ({ ...config, [name]: checked }))\n    }, []);\n    const handleFixedTimeToggle = useCallback(function (e) {\n        if (e.target.checked) {\n            setConfig(config => ({ ...config, fixed_time: 18000 }));\n        } else {\n            setConfig((({ fixed_time, ...config }) => config));\n        }\n    }, []);\n\n    const updateDimensionTypes = useContext(DataContext).custom.updateDimensionTypes;\n    const handleSubmit = useCallback(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const d = ({\n            ...config,\n            ...Object.fromEntries(new FormData(e.target))\n        });\n        updateDimensionTypes(d, data);\n        if (typeof onSave === 'function') {\n            onSave(d);\n        }\n    }, [config, data, onSave, updateDimensionTypes]);\n\n    return <form onSubmit={handleSubmit}>\n        <NamespacedKey example=\"typed\" type=\"dimension_types\" value={data.key} onSelect={handleVanillaSelect} expectBreakage={typeof data.key !== 'undefined'}>\n            dimension type\n            <JsonViewer data={config} />\n        </NamespacedKey>\n        <fieldset>\n            <legend>Light</legend>\n            <div className=\"form-row\">\n                <NumberInput id=\"ambient_light\" value={config.ambient_light} upChange={handleNumberChange} step=\"0.1\">Ambient light</NumberInput>\n                <ConfInput id=\"has_skylight\" checked={config.has_skylight} onChange={handleCheckboxChange}>Has skylight</ConfInput>\n            </div>\n        </fieldset>\n        <fieldset>\n            <legend>Height (20w49a only)</legend>\n            <div className=\"form-row\">\n                <NumberInput id=\"min_y\" value={config.min_y} min={-2048} max={2048 - config.height} step={16} upChange={handleNumberChange}>Min Y</NumberInput>\n                <NumberInput id=\"height\" value={config.height} max={2048 - config.min_y} step={16} upChange={handleNumberChange}>Height</NumberInput>\n            </div>\n            {config.logical_height > config.height &&\n                <p className=\"alert--warning\"><code>logical_height</code> cannot be higher than <code>height</code>.</p>\n            }\n            {(config.min_y & 0xF !== 0 || config.height & 0xF !== 0) &&\n                <p className=\"alert--warning\">These values have to be multiples of 16.</p>\n            }\n        </fieldset>\n        <fieldset>\n            <legend>Apparence</legend>\n            <div className=\"form-row\">\n                <InfiniburnIdentifier value={config.infiniburn} onChange={handleSelectChange} inputId=\"infiniburn\" />\n                <div>\n                    <label htmlFor=\"effects\">Sky effects : </label>\n                    <div className=\"inbl\" style={{ width: '16ch' }}>\n                        <Select options={DIMENSION_TYPE_EFFECTS} value={DIMENSION_TYPE_EFFECTS.find(o => config.effects === o.value) || DIMENSION_TYPE_EFFECTS[0]} onChange={o => handleSelectChange('effects', o)} inputId=\"effects\" />\n                    </div>\n                </div>\n            </div>\n            <div className=\"form-group form-row\">\n                <NumberInput id=\"logical_height\" value={config.logical_height} upChange={handleNumberChange} max={256}>Logical height</NumberInput>\n                <div className=\"form-row\">\n                    {typeof config.fixed_time !== 'number' && <label htmlFor=\"fixed_time-toggle\">Fixed time : </label>}\n                    {typeof config.fixed_time === 'number' && <NumberInput id=\"fixed_time\" value={config.fixed_time} upChange={handleNumberChange} step={1200}>Fixed time</NumberInput>}\n                    <input type=\"checkbox\" checked={typeof config.fixed_time === 'number'} onChange={handleFixedTimeToggle} className=\"checkbox\" id=\"fixed_time-toggle\" />\n                </div>\n            </div>\n            <p style={{ marginBottom: 0, textAlign: 'center' }}><small className=\"text-muted\">These settings are only used for appearance and some game mechanics<br />such as chorus fruits tp. To modify the world generation, change the noise parameters.</small></p>\n        </fieldset>\n        <fieldset>\n            <legend>Overworld related behavior</legend>\n            <div className=\"form-row\">\n                <ConfInput id=\"bed_works\" checked={config.bed_works} onChange={handleCheckboxChange}>Bed works</ConfInput>\n                <ConfInput id=\"has_raids\" checked={config.has_raids} onChange={handleCheckboxChange}>Has raids</ConfInput>\n                <ConfInput id=\"natural\" checked={config.natural} onChange={handleCheckboxChange}>Natural</ConfInput>\n            </div>\n        </fieldset>\n        <fieldset>\n            <legend>Nether related behavior</legend>\n            <div className=\"form-row\">\n                <ConfInput id=\"has_ceiling\" checked={config.has_ceiling} onChange={handleCheckboxChange}>Has ceiling</ConfInput>\n                <NumberInput id=\"coordinate_scale\" value={config.coordinate_scale} upChange={handleNumberChange} min={10 ** -5} max={10 ** 7} step={0.1}>Coordinate scale</NumberInput>\n            </div>\n            <div className=\"form-group form-row\">\n                <ConfInput id=\"respawn_anchor_works\" checked={config.respawn_anchor_works} onChange={handleCheckboxChange}>Respawn anchor works</ConfInput>\n                <ConfInput id=\"piglin_safe\" checked={config.piglin_safe} onChange={handleCheckboxChange}>Piglin safe</ConfInput>\n                <ConfInput id=\"ultrawarm\" checked={config.ultrawarm} onChange={handleCheckboxChange}>Ultrawarm</ConfInput>\n            </div>\n        </fieldset>\n        <Button type=\"submit\">Save</Button>\n    </form>;\n}\n\nfunction InfiniburnIdentifier({ inputId, onChange, value }) {\n    return <div>\n        <label htmlFor={inputId}>Infiniburn : </label>\n        <div className=\"inbl\" style={{ width: '16ch' }}>\n            <Select options={DIMENSION_TYPE_INFINIBURN} value={DIMENSION_TYPE_INFINIBURN.find(o => value === o.value) || DIMENSION_TYPE_INFINIBURN[0]} onChange={o => onChange('infiniburn', o)} inputId={inputId} />\n        </div>\n    </div>\n}\n","import { ConfInput, NumberInput } from '../../ui/Input';\nimport React, { useCallback, useState } from 'react';\n\nimport { BlockState } from '../state/BlockState';\nimport { Button } from '../../ui/Button';\nimport { INT_MIN_VALUE } from '../../utils/math';\nimport { JsonViewer } from '../../ui/JsonViewer';\nimport { NamespacedKey } from '../NamespacedKey';\nimport { OVERWORLD_NOISE } from './NoiseDefaults';\nimport { Structures } from './Structures';\nimport { useKeyedListOptions } from '../../hooks/context';\nimport { useValueChange } from '../../hooks/form';\nimport Select from '../../ui/Select';\n\nexport const NoiseGenerator = React.memo(function({onChange, settings = 'minecraft:overworld'}) {\n    const options = useKeyedListOptions('noises').map(option => {\n        option.resource = option.value;\n        return option;\n    });\n\n    const handleChange = useCallback(function(option) {\n        onChange(option.resource);\n    }, [onChange]);\n\n    if (typeof settings === 'object') {\n        options.push({ value: 'inline', label: 'inline', resource: settings });\n    }\n\n    return <div className=\"form-group\">\n        <label htmlFor=\"settings\">Noise settings</label><Select options={options} value={options.find(o => o.resource === settings)} onChange={handleChange} inputId=\"settings\" />\n    </div>;\n});\n\nexport const NoiseSettings = React.memo(function ({ data = OVERWORLD_NOISE, onSave }) {\n\n    const [state, setState] = useState(data);\n\n    const handleSubmit = useCallback(function (e) {\n        e.preventDefault();\n        const formData = Object.fromEntries(new FormData(e.target));\n        onSave({ ...state, ...formData });\n    }, [onSave, state]);\n\n    const handleBlockChange = useCallback(function (name, s) {\n        setState(state => ({ ...state, [name]: s }));\n    }, []);\n    const handleStructuresChange = useCallback(function (structures) {\n        setState(state => ({ ...state, structures }));\n    }, []);\n    const handleNoiseChange = useCallback(function (noise) {\n        setState(state => ({ ...state, noise: { ...state.noise, ...noise } }));\n    }, []);\n    const handleChange = useCallback(function(value) {\n        setState(state => ({ ...state, ...value }));\n    }, []);\n    const handleDisableMobGenerationChange = useCallback(function(e) {\n        const disable_mob_generation = e.target.checked;\n        setState(state => ({ ...state, disable_mob_generation }));\n    }, []);\n\n    return <form onSubmit={handleSubmit}>\n        <NamespacedKey example=\"epic\" type=\"noises\" value={data.key} expectBreakage={typeof data.key !== 'undefined'} onSelectLoad={setState}>\n            noise\n            <JsonViewer data={state} />\n        </NamespacedKey>\n\n        <Structures data={state.structures} onChange={handleStructuresChange} />\n\n        <fieldset>\n            <legend>Defaults</legend>\n            <div className=\"form-group\">\n                <label>Block</label> : <BlockState block={state.default_block} onChange={state => handleBlockChange('default_block', state)} />\n            </div>\n            <div className=\"form-group\">\n                <label>Fluid</label> : <BlockState block={state.default_fluid} onChange={state => handleBlockChange('default_fluid', state)} />\n            </div>\n        </fieldset>\n\n        <fieldset>\n            <legend>Main</legend>\n            <div className=\"form-group form-row\">\n                <NumberInput id=\"bedrock_roof_position\" value={state.bedrock_roof_position} min={-20} max={276} upChange={handleChange}>Bedrock roof position</NumberInput>\n                <NumberInput id=\"bedrock_floor_position\" value={state.bedrock_floor_position} min={-20} max={276} upChange={handleChange}>Bedrock floor position</NumberInput>\n                <NumberInput id=\"sea_level\" value={state.sea_level} max={255} upChange={handleChange}>Sea level</NumberInput>\n                <ConfInput id=\"disable_mob_generation\" checked={state.disable_mob_generation} onChange={handleDisableMobGenerationChange}>Disable mob generation</ConfInput>\n            </div>\n        </fieldset>\n\n        {Object.keys(state.structures.structures).includes('minecraft:nether_fossil') && (state.noise.height - 2 - state.sea_level) < 0 &&\n            <p className=\"alert--warning\">The game may crash when trying to generate nether fossils, because (height - 2 - sea_level) is negative (actually: {state.noise.height - 2 - state.sea_level}).</p>\n        }\n        <NoiseConfig data={state.noise} onChange={handleNoiseChange} />\n\n        <Button type=\"submit\">Save</Button>\n    </form>;\n});\n\nconst NoiseConfig = React.memo(function ({ data, onChange }) {\n\n    const handleChange = useValueChange(onChange, data);\n    const handleSamplingChange = useCallback(function (sampling) {\n        onChange({ ...data, sampling: { ...data.sampling, ...sampling } });\n    }, [data, onChange]);\n    const handleTopSlideChange = useCallback(function (top_slide) {\n        onChange({ ...data, top_slide: { ...data.top_slide, ...top_slide } });\n    }, [data, onChange]);\n    const handleBottomSlideChange = useCallback(function (bottom_slide) {\n        onChange({ ...data, bottom_slide: { ...data.bottom_slide, ...bottom_slide } });\n    }, [data, onChange]);\n\n    return <fieldset>\n        <legend>Noise config (advanced)</legend>\n        <div className=\"form-group form-row\">\n            <NumberInput id=\"height\" value={data.height} upChange={onChange} max={256}>Height</NumberInput>\n            <NumberInput id=\"size_horizontal\" value={data.size_horizontal} upChange={onChange} min={1} max={4}>Size horizontal</NumberInput>\n            <NumberInput id=\"size_vertical\" value={data.size_vertical} upChange={onChange} min={1} max={4}>Size vertical</NumberInput>\n            <NumberInput id=\"density_factor\" value={data.density_factor} upChange={onChange} step={0.01}>Density factor</NumberInput>\n            <NumberInput id=\"density_offset\" value={data.density_offset} upChange={onChange} min={INT_MIN_VALUE} step={0.01}>Density offset</NumberInput>\n        </div>\n        <div className=\"form-group form-row\">\n            <ConfInput id=\"simplex_surface_noise\" checked={data.simplex_surface_noise} onChange={handleChange}>Simplex surface noise</ConfInput>\n            <ConfInput id=\"random_density_offset\" checked={data.random_density_offset || false} onChange={handleChange}>Random density offset</ConfInput>\n            <ConfInput id=\"island_noise_override\" checked={data.island_noise_override || false} onChange={handleChange}>Island noise override</ConfInput>\n            <ConfInput id=\"amplified\" checked={data.amplified || false} onChange={handleChange}>Amplified</ConfInput>\n        </div>\n\n        <NoiseSamplingConfig data={data.sampling} onChange={handleSamplingChange}>Sampling</NoiseSamplingConfig>\n        <SlideConfig data={data.top_slide} onChange={handleTopSlideChange}>Top slide</SlideConfig>\n        <SlideConfig data={data.bottom_slide} onChange={handleBottomSlideChange}>Bottom slide</SlideConfig>\n    </fieldset>\n});\n\nconst NoiseSamplingConfig = React.memo(function ({ children, data, onChange }) {\n\n    return <fieldset>\n        <legend>{children}</legend>\n        <div className=\"form-group form-row\">\n            <NumberInput id=\"xz_scale\" value={data.xz_scale} min={0.001} max={1000} step={0.1} upChange={onChange}>XY scale</NumberInput>\n            <NumberInput id=\"y_scale\" value={data.y_scale} min={0.001} max={1000} step={0.1} upChange={onChange}>Y scale</NumberInput>\n            <NumberInput id=\"xz_factor\" value={data.xz_factor} min={0.001} max={1000} step={0.1} upChange={onChange}>XZ factor</NumberInput>\n            <NumberInput id=\"y_factor\" value={data.y_factor} min={0.001} max={1000} step={0.1} upChange={onChange}>Y factor</NumberInput>\n        </div>\n    </fieldset>\n});\n\nconst SlideConfig = React.memo(function ({ children, data, onChange }) {\n\n    return <fieldset>\n        <legend>{children}</legend>\n        <div className=\"form-group form-row\">\n            <NumberInput id=\"target\" value={data.target} upChange={onChange} min={INT_MIN_VALUE}>Target</NumberInput>\n            <NumberInput id=\"size\" value={data.size} upChange={onChange} max={256}>Size</NumberInput>\n            <NumberInput id=\"offset\" value={data.offset} upChange={onChange} min={INT_MIN_VALUE}>Offset</NumberInput>\n        </div>\n    </fieldset>\n});\n","import { CRUD, useCrudState } from '../../hooks/form';\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { Button } from '../../ui/Button';\nimport { NumberInput } from '../../ui/Input';\nimport { STRUCTURES } from './NoiseDefaults';\nimport { useToggle } from '../../hooks/ui';\nimport Select from '../../ui/Select';\n\nexport const Structures = React.memo(function ({ data, onChange }) {\n\n    const handleStrongholdChange = useCallback(function(stronghold) {\n        if (stronghold === false) {\n            onChange({ structures: data.structures });\n        } else {\n            onChange({ structures: data.structures, stronghold });\n        }\n    }, [data.structures, onChange]);\n    const handleStructuresChange = useCallback(function(structures) {\n        onChange({ ...data, structures });\n    }, [data, onChange]);\n\n    return <fieldset>\n        <legend>Structures</legend>\n        <Stronghold data={data.stronghold} onChange={handleStrongholdChange} />\n        <StructuresList data={data.structures} onChange={handleStructuresChange} />\n    </fieldset>\n});\n\nconst Stronghold = React.memo(function ({ data, onChange }) {\n\n    const [enabled, toggle] = useToggle(typeof data === 'object');\n    const [stronghold, setStronghold] = useState(data || { distance: 32, spread: 3, count: 128 });\n\n    const handleChange = useCallback(function(value) {\n        setStronghold(stronghold => ({ ...stronghold, ...value }));\n    }, [setStronghold]);\n\n    useEffect(function() {\n        if ((data !== stronghold && enabled)\n            || (enabled && typeof data === 'undefined')\n            || (!enabled && typeof data === 'object')) {\n                onChange(enabled ? stronghold : false);\n        }\n    }, [data, enabled, onChange, stronghold]);\n\n    return <div>\n        <div className=\"toggle-label\">Stronghold<Button cat=\"secondary\" onClick={toggle}>{enabled ? 'Disable' : 'Enable'}</Button></div>\n        {enabled && <div className=\"form-group form-row\">\n            <NumberInput id=\"distance\" defaultValue={stronghold.distance} upChange={handleChange} max=\"1023\">Distance</NumberInput>\n            <NumberInput id=\"spread\" defaultValue={stronghold.spread} upChange={handleChange} max=\"1023\">Spread</NumberInput>\n            <NumberInput id=\"count\" defaultValue={stronghold.count} upChange={handleChange} min=\"1\" max=\"4095\">Count</NumberInput>\n        </div>}\n    </div>\n});\n\nconst StructuresList = React.memo(function({ data, onChange }) {\n    const [visibility, toggle] = useToggle();\n    const [structures, dispatch] = useCrudState(Object.entries(data).map(([type, d]) => ({ ...d, type })));\n\n    const [previous, setPrevious] = useState(data);\n    if (data !== previous) {\n        dispatch({ type: CRUD.REPLACE, payload: Object.entries(data).map(([type, d]) => ({ ...d, type })) });\n        setPrevious(data);\n    }\n\n    const handleAdd = useCallback(function(e) {\n        e.preventDefault();\n        dispatch({ type: CRUD.ADD, payload: {\n            type: 'minecraft:village',\n            spacing: 32,\n            separation: 8,\n            salt: 10387312\n        }, unshift: true });\n        if (!visibility) {\n            toggle();\n        }\n    }, [dispatch, toggle, visibility]);\n    const handleChange = useCallback(function(original, structure) {\n        dispatch({ type: CRUD.UPDATE, target: original, payload: structure });\n    }, [dispatch]);\n    const handleRemove = useCallback(function(structure) {\n        dispatch({ type: CRUD.REMOVE, payload: structure });\n    }, [dispatch]);\n\n    useEffect(function() {\n        if (previous !== data) {\n            return;\n        }\n\n        const obj = {};\n        for (const structure of structures) {\n            obj[structure.type] = {\n                spacing: structure.spacing,\n                separation: structure.separation,\n                salt: structure.salt\n            };\n        }\n        if (JSON.stringify(obj) !== JSON.stringify(data)) {\n            onChange(obj);\n        }\n    }, [data, onChange, previous, structures]);\n\n    return <div>\n        <div className=\"toggle-label\">\n            Structures\n            <div className=\"btn-group\">\n                <Button onClick={handleAdd}>Add structure</Button>\n                {structures.length > 0 && <Button cat=\"secondary\" onClick={toggle}>{visibility ? 'Less...' : 'More...'}</Button>}\n            </div>\n        </div>\n        {visibility && structures.map((def, i) => \n            <Structure data={def} key={i} onChange={handleChange} onDelete={handleRemove} />\n        )}\n    </div>\n});\n\nconst Structure = React.memo(function ({ data, onChange, onDelete }) {\n\n    const handleTypeChange = useCallback(function(option) {\n        onChange(data, { ...data, type: option.value });\n    }, [data,  onChange]);\n    const handleSpacingChange = useCallback(function(value) {\n        const name = Object.keys(value)[0];\n        value = value[name];\n        if ((name === 'spacing' && value > data.separation)\n            || (name === 'separation' && value < data.spacing)) {\n            onChange(data, {...data, [name]: value});\n        } \n    }, [data,  onChange]);\n    const handleSaltChange = useCallback(function(salt) {\n        onChange(data, { ...data, salt });\n    }, [data,  onChange]);\n    const handleDelete = useCallback(function (e) {\n        e.preventDefault();\n        onDelete(data);\n    }, [data, onDelete]);\n\n    return <div>\n        <div className=\"form-group\">\n            <label>Type</label> : <Select options={STRUCTURES} value={STRUCTURES.find(s => s.value === data.type)} onChange={handleTypeChange} />\n        </div>\n        <div className=\"form-group form-row\">\n            <NumberInput id=\"spacing\" value={data.spacing} min={data.separation + 1} upChange={handleSpacingChange} max=\"4096\">Spacing</NumberInput>\n            <NumberInput id=\"separation\" value={data.separation} upChange={handleSpacingChange} max={Math.min(data.spacing - 1, 4096)}>Separation</NumberInput>\n            <NumberInput id=\"salt\" value={data.salt} onChange={handleSaltChange} max={0x7FFFFFFF} style={{ width: '150px' }}>Salt</NumberInput>\n            <div className=\"form-inline\"><Button cat=\"danger\" onClick={handleDelete}>Delete</Button></div>\n        </div>\n        <hr /> \n    </div>\n});\n","import { useMemo } from \"react\";\n\n/**\n * @typedef RESOURCE_OPTION\n * @type {object}\n * @property {string} value Unique option value \n * @property {string} label Text label \n * @property {string|object} resource\n */\n\n/**\n * \n * @param {{ value: string, label: string }[]} options \n * @param {string|object[]} [resources] \n * @param {boolean} [mutable] \n * @returns {[RESOURCE_OPTION[], RESOURCE_OPTION[]]} Options and selected options\n */\nexport function useInlineResources(options, resources = [], mutable = true) {\n    const inline = getInline(resources);\n\n    let values = options.map(option => {\n        if (mutable) {\n            option.resource = option.value;\n            return option;\n        }\n        return { ...option, resource: option.value };\n    });\n    if (inline.length > 0) {\n        if (mutable) {\n            values.push(...inline);\n        } else {\n            values = [ ...options, ...inline ];\n        }\n    }\n    return [\n        values,\n        useMemo(() => values.filter(o => resources.includes(o.resource)), [resources, values])\n    ];\n}\n\n/**\n * @param {string|object[]} resources \n * @returns {RESOURCE_OPTION[]}\n */\nfunction getInline(resources) {\n    return resources\n        .filter(res => typeof res === 'object')\n        .map((res, i) => {\n            const inline = 'inline' + (i+1);\n            return {\n                value: inline,\n                label: inline,\n                resource: res\n            }\n        });\n}\n","import React, { useCallback, useContext, useState } from 'react';\n\nimport { Button } from '../../ui/Button';\nimport { DataContext } from '../../context/DataContext';\nimport { JsonViewer } from '../../ui/JsonViewer';\nimport { Modal } from '../../ui/Modal';\nimport { NamespacedKey } from \"../NamespacedKey\";\nimport { NumberInput } from '../../ui/Input';\nimport { VANILLA_CARVERS } from './CarverDefaults';\nimport { useInlineResources } from '../../hooks/select';\nimport { useJsonEffect } from '../../hooks/form';\nimport { useKeyedListOptions } from '../../hooks/context';\nimport { useToggle } from '../../hooks/ui';\nimport Select from '../../ui/Select';\n\nexport const ConfiguredCarver = React.memo(function({ carvers, onChange }) {\n\n    carvers = useJsonEffect(carvers || { air: [ 'minecraft:cave', 'minecraft:canyon' ] }, carvers, onChange);\n    const [open, toggleModal] = useToggle();\n\n    const options = useKeyedListOptions('carvers');\n\n    const handleAirChange = useCallback(function (options) {\n        onChange({ ...carvers, air: options === null ? [] : options.map(option => option.resource) });\n    }, [carvers, onChange]);\n    const handleLiquidChange = useCallback(function (options) {\n        onChange({ ...carvers, liquid: options === null ? [] : options.map(option => option.resource) });\n    }, [carvers, onChange]);\n    const handleNewClick = useCallback(function (e) {\n        e.preventDefault();\n        toggleModal(true);\n    }, [toggleModal]);\n    const handleCarverCreated = useCallback(function(carver) {\n        onChange({ ...carvers, air: [ ...(carvers.air || []), carver.key ] });\n        toggleModal(false);\n    }, [carvers, onChange, toggleModal]);\n\n    const [optionsAir, selectedAir] = useInlineResources(options, carvers.air);\n    const [optionsLiquid, selectedLiquid] = useInlineResources(options, carvers.liquid);\n\n    return <fieldset>\n        <legend>Carvers <Button onClick={handleNewClick}>Create new</Button></legend>\n\n        <label htmlFor=\"air\">Air</label>\n        <Select isMulti options={optionsAir} onChange={handleAirChange} value={selectedAir} inputId=\"air\" />\n        <div className=\"form-group\">\n            <label htmlFor=\"liquid\">Liquid</label>\n            <Select isMulti options={optionsLiquid} onChange={handleLiquidChange} value={selectedLiquid} inputId=\"liquid\" />\n        </div>\n        {open && <Modal open={open} onClose={toggleModal}>\n            <ConfiguredCarverForm onSave={handleCarverCreated} />\n        </Modal>}\n    </fieldset>\n});\n\nexport function ConfiguredCarverForm({ data = { type: 'minecraft:cave', config: { probability: 0.143 } }, onSave }) {\n\n    const [carver, setCarver] = useState(data);\n\n    const handleSelectChange = useCallback(function (option) {\n        setCarver({\n            config: {\n                probability: option.probability\n            },\n            type: option.value\n        });\n    }, []);\n    const handleProbabilityChange = useCallback(function (probability) {\n        setCarver(carver => ({ ...carver, config: { probability } }));\n    }, []);\n\n    const updateCarvers = useContext(DataContext).custom.updateCarvers;\n    const handleSubmit = useCallback(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const c = ({\n            ...data,\n            ...carver,\n            ...Object.fromEntries(new FormData(e.target))\n        });\n        updateCarvers(c, data);\n        if (typeof onSave === 'function') {\n            onSave(c);\n        }\n    }, [data, carver, onSave, updateCarvers]);\n\n    return <form onSubmit={handleSubmit}>\n        <NamespacedKey example=\"pit\" type=\"carvers\" value={data.key} inline={false} expectBreakage={typeof data.key !== 'undefined'} onSelectLoad={setCarver}>\n            configured carver\n            <JsonViewer data={carver} />\n        </NamespacedKey>\n        <div className=\"form-group\">\n            <label htmlFor=\"type\">Type</label>\n            <Select options={VANILLA_CARVERS} value={VANILLA_CARVERS.find(o => o.value === carver.type)} onChange={handleSelectChange} inputId=\"type\" />\n        </div>\n        <div className=\"form-group\">\n            <NumberInput value={carver.config.probability} max=\"1\" step=\"0.001\" onChange={handleProbabilityChange}>Probability</NumberInput>\n        </div>\n        <Button type=\"submit\">Save</Button>\n    </form>\n}\n","import React from 'react';\nimport ReactSelect from 'react-select';\nimport ReactSelectCreatable from \"react-select/creatable\";\n\nconst styles = {\n    control: styles => ({\n        ...styles,\n        backgroundColor: 'var(--bg-color-input)',\n        borderColor: 'var(--border-color)',\n        ':hover': {\n            ...styles[':hover'],\n            backgroundColor: 'var(--bg-color-input-hover)',\n            borderColor: 'var(--border-color)'\n        },\n        ':focus': {\n            ...styles[':focus'],\n            boxShadow: '0 0 0 1px var(--focus-color)'\n        },\n        transition: '.1s',\n    }),\n    singleValue: styles => ({\n        ...styles,\n        color: 'var(--primary-color)',\n    }),\n    menuList: styles => ({\n        ...styles,\n        color: 'var(--primary-color)',\n        backgroundColor: 'var(--bg-color-section)',\n        ':hover': {\n            ...styles[':hover'],\n            color: 'var(--bg-color-input-hover)',\n        },\n    }),\n    input: styles => ({\n        ...styles,\n        color: 'var(--primary-color)',\n    }),\n    menu: styles => ({\n        ...styles,\n        backgroundColor: 'var(--bg-color-section)',\n    }),\n    option: (styles, { isFocused, isSelected }) => ({\n        ...styles,\n        color: 'var(--primary-color)',\n        cursor: 'pointer',\n        backgroundColor: isSelected\n            ? 'var(--bg-color-select-focus)'\n            : isFocused\n                ? 'var(--bg-color-input-hover)'\n                : null,\n        ':active': {\n            ...styles[':active'],\n            backgroundColor: isSelected\n                ? 'var(--bg-color-select-focus)'\n                : 'var(--bg-color-input-hover)',\n        },\n    }),\n    multiValue: styles => ({\n        ...styles,\n        color: 'var(--primary-color)',\n        backgroundColor: 'var(--select-label)'\n    }),\n    multiValueLabel: styles => ({\n        ...styles,\n        color: 'var(--primary-color)',\n        backgroundColor: 'var(--select-label)'\n    }),\n    multiValueRemove: styles => ({\n        ...styles,\n        ':hover': {\n            ...styles[':hover'],\n            backgroundColor: 'var(--select-label)',\n        },\n    }),\n};\n\nconst Select = props => {\n    return (\n        <ReactSelect\n            styles={styles}\n            {...props}\n        />\n    );\n};\n\nexport const CreatableSelect = props => {\n    return (\n        <ReactSelectCreatable\n            styles={styles}\n            {...props}\n        />\n    );\n};\n\nexport default React.memo(Select);\n"],"sourceRoot":""}